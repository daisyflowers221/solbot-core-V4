import{r as x,a as rs,u as ns,N as ls,b as os,c as is,d as $e,R as ds,B as cs}from"./react-DlqEGpln.js";import{c as Te,a as xs,u as K,b as re,P as ms}from"./redux-CxW7JI-i.js";import{R as Q,L as G,W as Be,a as ft,V as E,Z as we,A as Y,b as gs,F as dt,T as ee,c as me,d as ke,S as ht,e as us,M as hs,f as ps,B as bs,U as fs,D as X,g as ae,C as _,h as V,i as Ke,j as J,k as _e,l as Me,m as ys,P as ve,n as Ae,o as Se,H as Je,p as Lt,X as Et,E as pt,q as js,r as Oe,s as He,t as Ns,u as bt,v as De,w as se,x as et,y as yt,z as te,G as tt,I as Ce,J as Ie,K as We,N as Ft,O as ge,Q as ze,Y as ks,_ as Rt,$ as Ye,a0 as Ue,a1 as Mt,a2 as Dt,a3 as Pe,a4 as Fe,a5 as jt,a6 as vs,a7 as ws,a8 as Pt,a9 as lt,aa as Ss,ab as Cs,ac as Ts,ad as Nt,ae as As,af as Xe,ag as ct,ah as $s,ai as Ls,aj as Es,ak as Fs,al as Ot}from"./ui-KTWuTIe8.js";import{R as oe,A as kt,C as de,X as ce,Y as xe,T as ie,a as vt,L as xt,b as Re,c as pe,B as qe,d as je,P as Rs,e as Ms,f as Ds}from"./charts-xkW-Ou8R.js";import"./utils-B-dksMZM.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function a(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=a(l);fetch(l.href,o)}})();var It={exports:{}},st={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps=x,Os=Symbol.for("react.element"),Is=Symbol.for("react.fragment"),Bs=Object.prototype.hasOwnProperty,Ws=Ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Us={key:!0,ref:!0,__self:!0,__source:!0};function Bt(t,s,a){var r,l={},o=null,m=null;a!==void 0&&(o=""+a),s.key!==void 0&&(o=""+s.key),s.ref!==void 0&&(m=s.ref);for(r in s)Bs.call(s,r)&&!Us.hasOwnProperty(r)&&(l[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)l[r]===void 0&&(l[r]=s[r]);return{$$typeof:Os,type:t,key:o,ref:m,props:l,_owner:Ws.current}}st.Fragment=Is;st.jsx=Bt;st.jsxs=Bt;It.exports=st;var e=It.exports,mt={},wt=rs;mt.createRoot=wt.createRoot,mt.hydrateRoot=wt.hydrateRoot;const Ks=()=>{if(typeof window<"u"){const t=localStorage.getItem("theme");if(t&&["light","dark","system"].includes(t))return t}return"system"},Wt=t=>t==="system"?typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1:t==="dark",gt={theme:Ks(),isDark:!1};gt.isDark=Wt(gt.theme);const Ut=Te({name:"theme",initialState:gt,reducers:{setTheme:(t,s)=>{t.theme=s.payload,t.isDark=Wt(s.payload),typeof window<"u"&&(localStorage.setItem("theme",s.payload),t.isDark?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},toggleTheme:t=>{const s=t.isDark?"light":"dark";t.theme=s,t.isDark=!t.isDark,typeof window<"u"&&(localStorage.setItem("theme",s),t.isDark?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},initializeTheme:t=>{if(typeof window<"u"){const s=window.matchMedia("(prefers-color-scheme: dark)");t.theme==="system"&&(t.isDark=s.matches),t.isDark?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),s.addEventListener("change",a=>{t.theme==="system"&&(t.isDark=a.matches,a.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))})}}}}),{setTheme:_s,toggleTheme:cr,initializeTheme:Kt}=Ut.actions,Hs=Ut.reducer,Vs={connection:null,status:"disconnected",messages:[],lastMessage:null,reconnectAttempts:0,maxReconnectAttempts:5,reconnectInterval:3e3,url:"wss://floral-capable-sun.solana-mainnet.quiknode.pro/569466c8ec8e71909ae64117473d0bd3327e133a/"},_t=Te({name:"websocket",initialState:Vs,reducers:{setConnection:(t,s)=>{t.connection=s.payload},setStatus:(t,s)=>{t.status=s.payload},addMessage:(t,s)=>{const a={...s.payload,id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:Date.now()};t.messages.push(a),t.lastMessage=a,t.messages.length>1e3&&(t.messages=t.messages.slice(-1e3))},clearMessages:t=>{t.messages=[],t.lastMessage=null},incrementReconnectAttempts:t=>{t.reconnectAttempts+=1},resetReconnectAttempts:t=>{t.reconnectAttempts=0},setUrl:(t,s)=>{t.url=s.payload}}}),{setConnection:St,setStatus:Le,addMessage:ye,clearMessages:xr,incrementReconnectAttempts:ot,resetReconnectAttempts:Gs,setUrl:mr}=_t.actions,zs=()=>(t,s)=>{const{websocket:a}=s();if(a.connection)try{a.connection.close()}catch(l){console.error("Error closing existing WebSocket:",l)}const r=()=>{t(Le("connecting"));try{let l=null;try{l=new WebSocket(a.url)}catch(o){console.error("Failed to create WebSocket connection:",o),t(Le("error")),t(ye({type:"error",data:{message:"Failed to create WebSocket connection",error:o}}));const m=s();m.websocket.reconnectAttempts<m.websocket.maxReconnectAttempts&&(t(ot()),setTimeout(()=>{console.log(`Reconnecting... Attempt ${m.websocket.reconnectAttempts+1}`),r()},m.websocket.reconnectInterval));return}l&&(l.onopen=()=>{console.log("WebSocket connected to:",a.url),t(St(l)),t(Le("connected")),t(Gs()),t(ye({type:"system",data:{message:"Connected to Solana RPC WebSocket"}}))},l.onmessage=o=>{try{const m=JSON.parse(o.data);t(ye({type:m.type||"message",data:m}))}catch(m){console.error("Failed to parse WebSocket message:",m),t(ye({type:"raw",data:{message:o.data}}))}},l.onclose=o=>{console.log("WebSocket disconnected:",o.code,o.reason),t(St(null)),t(Le("disconnected")),t(ye({type:"system",data:{message:"Disconnected from Solana RPC WebSocket",code:o.code,reason:o.reason}}));const m=s();m.websocket.reconnectAttempts<m.websocket.maxReconnectAttempts&&(t(ot()),setTimeout(()=>{console.log(`Reconnecting... Attempt ${m.websocket.reconnectAttempts+1}`),r()},m.websocket.reconnectInterval))},l.onerror=o=>{console.error("WebSocket error:",o),t(Le("error")),t(ye({type:"error",data:{message:"WebSocket connection error",error:o}}))})}catch(l){console.error("Failed to initialize WebSocket connection:",l),t(Le("error")),t(ye({type:"error",data:{message:"Failed to initialize WebSocket connection",error:l}}));const o=s();o.websocket.reconnectAttempts<o.websocket.maxReconnectAttempts&&(t(ot()),setTimeout(()=>{console.log(`Reconnecting... Attempt ${o.websocket.reconnectAttempts+1}`),r()},o.websocket.reconnectInterval))}};r()},qs=_t.reducer,Js={currentSession:null,sessionFiles:[],isLoading:!1,error:null,sessionTimestamp:null},Ht=Te({name:"session",initialState:Js,reducers:{setCurrentSession:(t,s)=>{t.currentSession=s.payload,t.error=null},setSessionFiles:(t,s)=>{t.sessionFiles=s.payload},setLoading:(t,s)=>{t.isLoading=s.payload},setError:(t,s)=>{t.error=s.payload},setSessionTimestamp:(t,s)=>{t.sessionTimestamp=s.payload},updateSessionWallets:(t,s)=>{t.currentSession&&(t.currentSession.wallets=s.payload)},clearSession:t=>{t.currentSession=null,t.error=null,t.sessionTimestamp=null}}}),{setCurrentSession:Vt,setSessionFiles:gr,setLoading:Ct,setError:Ys,setSessionTimestamp:ur,updateSessionWallets:hr,clearSession:pr}=Ht.actions,Xs=Ht.reducer,Tt={status:"idle",strategy:null,currentLap:null,laps:[],globalTradingFlag:!1,startTime:null,elapsedTime:0,timeLeft:0,duration:0,pauseStartTimes:[],resumeTimes:[],error:null,transactionStats:{totalTransactions:0,successfulTransactions:0,failedTransactions:0,totalVolume:0,totalFees:0,averageSlippage:0},poolInfo:null},Gt=Te({name:"trading",initialState:Tt,reducers:{setStatus:(t,s)=>{t.status=s.payload,s.payload==="idle"&&(t.error=null)},setStrategy:(t,s)=>{t.strategy=s.payload},setGlobalTradingFlag:(t,s)=>{t.globalTradingFlag=s.payload},startTrading:(t,s)=>{t.status="running",t.strategy=s.payload.strategy,t.duration=s.payload.duration,t.startTime=Date.now(),t.globalTradingFlag=!0,t.error=null},pauseTrading:t=>{t.status="paused",t.globalTradingFlag=!1,t.pauseStartTimes.push(Date.now())},resumeTrading:t=>{t.status="running",t.globalTradingFlag=!0,t.resumeTimes.push(Date.now())},stopTrading:t=>{t.status="stopped",t.globalTradingFlag=!1},startLap:(t,s)=>{const a={lapNumber:s.payload,startTime:Date.now(),totalSolCollected:0,totalTokensCollected:0,status:"running",transactionCount:0,successRate:0};t.currentLap=a,t.laps.push(a)},completeLap:(t,s)=>{if(t.currentLap){t.currentLap.endTime=Date.now(),t.currentLap.totalSolCollected=s.payload.solCollected,t.currentLap.totalTokensCollected=s.payload.tokensCollected,t.currentLap.status="completed",s.payload.transactionCount!==void 0&&(t.currentLap.transactionCount=s.payload.transactionCount),s.payload.successRate!==void 0&&(t.currentLap.successRate=s.payload.successRate),s.payload.poolInfo&&(t.currentLap.poolInfo=s.payload.poolInfo);const a=t.laps.findIndex(r=>r.lapNumber===t.currentLap?.lapNumber);a!==-1&&(t.laps[a]={...t.currentLap}),t.currentLap=null}},failLap:(t,s)=>{if(t.currentLap){t.currentLap.endTime=Date.now(),t.currentLap.status="failed";const a=t.laps.findIndex(r=>r.lapNumber===t.currentLap?.lapNumber);a!==-1&&(t.laps[a]={...t.currentLap}),t.currentLap=null}t.error=s.payload},updateElapsedTime:(t,s)=>{t.elapsedTime=s.payload,t.timeLeft=Math.max(0,t.duration-s.payload)},updateTransactionStats:(t,s)=>{t.transactionStats={...t.transactionStats,...s.payload}},setPoolInfo:(t,s)=>{t.poolInfo=s.payload},setError:(t,s)=>{t.error=s.payload,s.payload&&(t.status="error")},clearError:t=>{t.error=null},reset:t=>({...Tt})}}),{setStatus:br,setStrategy:fr,setGlobalTradingFlag:yr,startTrading:Qs,pauseTrading:Zs,resumeTrading:ea,stopTrading:ta,startLap:zt,completeLap:qt,failLap:sa,updateElapsedTime:aa,updateTransactionStats:jr,setPoolInfo:Nr,setError:kr,clearError:vr,reset:wr}=Gt.actions,ra=Gt.reducer,na={adminWallet:null,tradingWallets:[],isLoading:!1,error:null,totalSolBalance:0,totalTokenBalance:0},Jt=Te({name:"wallet",initialState:na,reducers:{setAdminWallet:(t,s)=>{t.adminWallet=s.payload},setTradingWallets:(t,s)=>{t.tradingWallets=s.payload},addTradingWallet:(t,s)=>{t.tradingWallets.push(s.payload)},updateWalletBalance:(t,s)=>{const{publicKey:a,solBalance:r,tokenBalance:l}=s.payload;t.adminWallet&&t.adminWallet.publicKey===a&&(r!==void 0&&(t.adminWallet.solBalance=r),l!==void 0&&(t.adminWallet.tokenBalance=l),t.adminWallet.lastActivity=Date.now());const o=t.tradingWallets.find(m=>m.publicKey===a);o&&(r!==void 0&&(o.solBalance=r),l!==void 0&&(o.tokenBalance=l),o.lastActivity=Date.now())},updateWalletActivity:(t,s)=>{const{publicKey:a,isActive:r}=s.payload,l=t.tradingWallets.find(o=>o.publicKey===a);l&&(l.isActive=r,l.lastActivity=Date.now())},setLoading:(t,s)=>{t.isLoading=s.payload},setError:(t,s)=>{t.error=s.payload},calculateTotals:t=>{t.totalSolBalance=t.tradingWallets.reduce((s,a)=>s+a.solBalance,0),t.totalTokenBalance=t.tradingWallets.reduce((s,a)=>s+a.tokenBalance,0),t.adminWallet&&(t.totalSolBalance+=t.adminWallet.solBalance,t.totalTokenBalance+=t.adminWallet.tokenBalance)},clearWallets:t=>{t.adminWallet=null,t.tradingWallets=[],t.totalSolBalance=0,t.totalTokenBalance=0,t.error=null}}}),{setAdminWallet:Qe,setTradingWallets:Ne,addTradingWallet:Sr,updateWalletBalance:Cr,updateWalletActivity:Tr,setLoading:Ar,setError:$r,calculateTotals:la,clearWallets:Lr}=Jt.actions,oa=Jt.reducer,Yt={RPC_URL:"https://floral-capable-sun.solana-mainnet.quiknode.pro/569466c8ec8e71909ae64117473d0bd3327e133a/",WS_URL:"wss://floral-capable-sun.solana-mainnet.quiknode.pro/569466c8ec8e71909ae64117473d0bd3327e133a/",WSOL_ADDRESS:"So11111111111111111111111111111111111111112",RAYDIUM_LIQUIDITY_POOL_V4_ADDRESS:"675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8",SLIPPAGE_PERCENT:5,initialAmount:1e-5,TOKEN_TRANSFER_THRESHOLD:0,poolSearchMaxRetries:10,poolSearchRetryInterval:2e3,retryInterval:1e3,maxRetries:15,RENT_EXEMPT_FEE:9e5,maxLamports:6e3,TRADE_DURATION_VOLUME:12e8,TRADE_DURATION_MAKER:181e3,loopInterval:8e3,RENT_EXEMPT_SWAP_FEE:0,minPercentage:5,maxPercentage:15,minSellPercentage:50,maxSellPercentage:100,buyDuration:61e3,sellDuration:3e4,SESSION_DIR:"./sessions"},ia={swapConfig:Yt,isLoading:!1,error:null,hasUnsavedChanges:!1},Xt=Te({name:"config",initialState:ia,reducers:{updateSwapConfig:(t,s)=>{t.swapConfig={...t.swapConfig,...s.payload},t.hasUnsavedChanges=!0},resetSwapConfig:t=>{t.swapConfig=Yt,t.hasUnsavedChanges=!0},saveConfig:t=>{t.hasUnsavedChanges=!1,t.error=null},setLoading:(t,s)=>{t.isLoading=s.payload},setError:(t,s)=>{t.error=s.payload},clearUnsavedChanges:t=>{t.hasUnsavedChanges=!1}}}),{updateSwapConfig:da,resetSwapConfig:ca,saveConfig:xa,setLoading:Er,setError:Fr,clearUnsavedChanges:ma}=Xt.actions,ga=Xt.reducer,ua={logs:[],consoleOutput:[],errors:[],maxLogEntries:1e3,maxConsoleLines:500,maxErrors:100,isLoggingEnabled:!0,isConsoleEnabled:!0,isErrorTrackingEnabled:!0},Qt=Te({name:"logging",initialState:ua,reducers:{addLog:(t,s)=>{if(!t.isLoggingEnabled)return;const a={...s.payload,id:Date.now().toString()+Math.random().toString(36).substring(2,9),timestamp:Date.now()};if(t.logs.push(a),t.logs.length>t.maxLogEntries&&(t.logs=t.logs.slice(-t.maxLogEntries)),t.isConsoleEnabled){const r=`[${new Date(a.timestamp).toISOString()}] [${a.level.toUpperCase()}] [${a.source}] ${a.message}`;t.consoleOutput.push(r),t.consoleOutput.length>t.maxConsoleLines&&(t.consoleOutput=t.consoleOutput.slice(-t.maxConsoleLines))}if(t.isErrorTrackingEnabled&&a.level==="error"){const r=a.message,l=r.slice(0,100),o=t.errors.findIndex(m=>m.message.slice(0,100)===l);o>=0?(t.errors[o].occurrences+=1,t.errors[o].lastOccurrence=a.timestamp):(t.errors.push({id:a.id,timestamp:a.timestamp,message:r,source:a.source,stack:a.details?.stack,resolved:!1,severity:ha(r),occurrences:1,lastOccurrence:a.timestamp}),t.errors.length>t.maxErrors&&(t.errors=t.errors.slice(-t.maxErrors)))}},addConsoleOutput:(t,s)=>{t.isConsoleEnabled&&(t.consoleOutput.push(s.payload),t.consoleOutput.length>t.maxConsoleLines&&(t.consoleOutput=t.consoleOutput.slice(-t.maxConsoleLines)))},resolveError:(t,s)=>{const a=t.errors.findIndex(r=>r.id===s.payload);a>=0&&(t.errors[a].resolved=!0,t.errors[a].resolvedAt=Date.now())},clearLogs:t=>{t.logs=[]},clearConsole:t=>{t.consoleOutput=[]},clearErrors:t=>{t.errors=[]},setLoggingEnabled:(t,s)=>{t.isLoggingEnabled=s.payload},setConsoleEnabled:(t,s)=>{t.isConsoleEnabled=s.payload},setErrorTrackingEnabled:(t,s)=>{t.isErrorTrackingEnabled=s.payload},setMaxLogEntries:(t,s)=>{t.maxLogEntries=s.payload,t.logs.length>s.payload&&(t.logs=t.logs.slice(-s.payload))},setMaxConsoleLines:(t,s)=>{t.maxConsoleLines=s.payload,t.consoleOutput.length>s.payload&&(t.consoleOutput=t.consoleOutput.slice(-s.payload))},setMaxErrors:(t,s)=>{t.maxErrors=s.payload,t.errors.length>s.payload&&(t.errors=t.errors.slice(-s.payload))}}});function ha(t){const s=t.toLowerCase();return s.includes("critical")||s.includes("fatal")||s.includes("crash")?"critical":s.includes("error")||s.includes("exception")||s.includes("failed")?"high":s.includes("warning")||s.includes("timeout")||s.includes("retry")?"medium":"low"}const{addLog:pa,addConsoleOutput:ba,resolveError:Rr,clearLogs:Mr,clearConsole:Dr,clearErrors:Pr,setLoggingEnabled:Or,setConsoleEnabled:Ir,setErrorTrackingEnabled:Br,setMaxLogEntries:Wr,setMaxConsoleLines:Ur,setMaxErrors:Kr}=Qt.actions,fa=Qt.reducer,ut=xs({reducer:{theme:Hs,websocket:qs,session:Xs,trading:ra,wallet:oa,config:ga,logging:fa},middleware:t=>t({serializableCheck:{ignoredActions:["websocket/setConnection"],ignoredPaths:["websocket.connection"]}})});class ya{baseUrl="http://localhost:12001/api";getErrorMessage(s){return s instanceof Error?this.getErrorMessage(s):String(s)}async handleResponse(s){if(!s.ok){let a=`HTTP ${s.status}: ${s.statusText}`;try{const r=await s.json();r.error&&(a=r.error)}catch{}throw new Error(a)}return s}async testConnection(){try{return(await fetch(`${this.baseUrl}/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)})).ok}catch(s){return console.error("Backend connection test failed:",s),!1}}async getSessionFiles(){try{console.log("🔍 Fetching session files from backend...");const s=await fetch(`${this.baseUrl}/sessions`,{signal:AbortSignal.timeout(1e4)});await this.handleResponse(s);const a=await s.json();return console.log("✅ Session files received:",a.length,"files"),a.map(r=>({...r,lastModified:new Date(r.lastModified)}))}catch(s){throw console.error("❌ Failed to fetch session files:",s),new Error(`Failed to fetch session files: ${this.getErrorMessage(s)}`)}}async loadSession(s){try{console.log("🔍 Loading session from backend:",s);const a=await fetch(`${this.baseUrl}/sessions/${encodeURIComponent(s)}`,{signal:AbortSignal.timeout(1e4)});await this.handleResponse(a);const r=await a.json();return console.log("✅ Session loaded successfully"),r}catch(a){throw console.error("❌ Failed to load session:",a),new Error(`Failed to load session: ${this.getErrorMessage(a)}`)}}async saveSession(s){try{console.log("💾 Saving session to backend...");const a=await fetch(`${this.baseUrl}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(15e3)});await this.handleResponse(a);const r=await a.json();return console.log("✅ Session saved successfully:",r.filename),r.filename}catch(a){throw console.error("❌ Failed to save session:",a),new Error(`Failed to save session: ${this.getErrorMessage(a)}`)}}async appendWalletsToSession(s,a){try{console.log("📝 Appending wallets to session...");const r=await fetch(`${this.baseUrl}/sessions/append-wallets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallets:s,sessionFileName:a}),signal:AbortSignal.timeout(15e3)});await this.handleResponse(r),console.log("✅ Wallets appended successfully")}catch(r){throw console.error("❌ Failed to append wallets to session:",r),new Error(`Failed to append wallets to session: ${this.getErrorMessage(r)}`)}}async deleteSession(s){try{console.log("🗑️ Deleting session:",s);const a=await fetch(`${this.baseUrl}/sessions/${encodeURIComponent(s)}`,{method:"DELETE",signal:AbortSignal.timeout(1e4)});await this.handleResponse(a),console.log("✅ Session deleted successfully")}catch(a){throw console.error("❌ Failed to delete session:",a),new Error(`Failed to delete session: ${this.getErrorMessage(a)}`)}}async validateTokenAddress(s){try{if(console.log("🔍 Validating token address with backend:",s),!await this.testConnection())throw new Error("Backend server is not running. Please start the backend with: npm run start-backend");const r=await fetch(`${this.baseUrl}/tokens/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tokenAddress:s}),signal:AbortSignal.timeout(15e3)});await this.handleResponse(r);const l=await r.json();return console.log("✅ Token validation result:",l),l}catch(a){throw console.error("❌ Failed to validate token:",a),new Error(`Failed to validate token: ${this.getErrorMessage(a)}`)}}async getPoolKeys(s){try{console.log("🔍 Getting pool keys from backend:",s);const a=await fetch(`${this.baseUrl}/tokens/pool-keys`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tokenAddress:s}),signal:AbortSignal.timeout(15e3)});await this.handleResponse(a);const r=await a.json();return console.log("✅ Pool keys received:",r),r}catch(a){throw console.error("❌ Failed to get pool keys:",a),new Error(`Failed to get pool keys: ${this.getErrorMessage(a)}`)}}async getMarketId(s){try{console.log("🔍 Getting market ID from backend:",s);const a=await fetch(`${this.baseUrl}/tokens/market-id`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tokenAddress:s}),signal:AbortSignal.timeout(1e4)});await this.handleResponse(a);const r=await a.json();return console.log("✅ Market ID received:",r.marketId),r.marketId}catch(a){throw console.error("❌ Failed to get market ID:",a),new Error(`Failed to get market ID: ${this.getErrorMessage(a)}`)}}async createAdminWallet(){try{console.log("👤 Creating admin wallet...");const s=await fetch(`${this.baseUrl}/wallets/admin`,{method:"POST",signal:AbortSignal.timeout(1e4)});await this.handleResponse(s);const a=await s.json();return console.log("✅ Admin wallet created:",a.publicKey),a}catch(s){throw console.error("❌ Failed to create admin wallet:",s),new Error(`Failed to create admin wallet: ${this.getErrorMessage(s)}`)}}async importAdminWallet(s){try{console.log("📥 Importing admin wallet...");const a=await fetch(`${this.baseUrl}/wallets/admin/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({privateKey:s}),signal:AbortSignal.timeout(1e4)});await this.handleResponse(a);const r=await a.json();return console.log("✅ Admin wallet imported:",r.publicKey),r}catch(a){throw console.error("❌ Failed to import admin wallet:",a),new Error(`Failed to import admin wallet: ${this.getErrorMessage(a)}`)}}async generateTradingWallets(s){try{console.log("🏭 Generating trading wallets:",s);const a=await fetch(`${this.baseUrl}/wallets/trading`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:s}),signal:AbortSignal.timeout(15e3)});await this.handleResponse(a);const r=await a.json();return console.log("✅ Trading wallets generated:",r.length),r}catch(a){throw console.error("❌ Failed to generate trading wallets:",a),new Error(`Failed to generate trading wallets: ${this.getErrorMessage(a)}`)}}async getWalletBalances(s){try{console.log("💰 Getting wallet balances...");const a=await fetch(`${this.baseUrl}/wallets/balances`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallets:s}),signal:AbortSignal.timeout(15e3)});await this.handleResponse(a);const r=await a.json();return console.log("✅ Wallet balances updated"),r}catch(a){throw console.error("❌ Failed to get wallet balances:",a),new Error(`Failed to get wallet balances: ${this.getErrorMessage(a)}`)}}async getAdminTokenBalance(s,a){try{console.log("💰 Getting admin token balance...");const r=await fetch(`${this.baseUrl}/wallets/admin/token-balance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminWallet:s,tokenAddress:a}),signal:AbortSignal.timeout(1e4)});await this.handleResponse(r);const l=await r.json();return console.log("✅ Admin token balance:",l.balance),l.balance}catch(r){throw console.error("❌ Failed to get admin token balance:",r),new Error(`Failed to get admin token balance: ${this.getErrorMessage(r)}`)}}async distributeSol(s,a,r){try{console.log("💸 Distributing SOL to wallets...");const l=await fetch(`${this.baseUrl}/distribution/sol`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminWallet:s,tradingWallets:a,totalAmount:r}),signal:AbortSignal.timeout(3e4)});await this.handleResponse(l);const o=await l.json();return console.log("✅ SOL distributed successfully"),Array.isArray(o)?o:o.successWallets||o}catch(l){throw console.error("❌ Failed to distribute SOL:",l),new Error(`Failed to distribute SOL: ${this.getErrorMessage(l)}`)}}async distributeTokens(s,a,r,l){try{console.log("🪙 Distributing tokens to wallets...");const o=await fetch(`${this.baseUrl}/distribution/tokens`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminWallet:s,tradingWallets:a,tokenAddress:r,amountPerWallet:l}),signal:AbortSignal.timeout(3e4)});await this.handleResponse(o);const m=await o.json();return console.log("✅ Tokens distributed successfully"),m}catch(o){throw console.error("❌ Failed to distribute tokens:",o),new Error(`Failed to distribute tokens: ${this.getErrorMessage(o)}`)}}async startTrading(s,a){try{console.log("🚀 Starting trading with strategy:",s);const r=await fetch(`${this.baseUrl}/trading/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({strategy:s,sessionData:a}),signal:AbortSignal.timeout(15e3)});await this.handleResponse(r),console.log("✅ Trading started successfully")}catch(r){throw console.error("❌ Failed to start trading:",r),new Error(`Failed to start trading: ${this.getErrorMessage(r)}`)}}async pauseTrading(){try{console.log("⏸️ Pausing trading...");const s=await fetch(`${this.baseUrl}/trading/pause`,{method:"POST",signal:AbortSignal.timeout(1e4)});await this.handleResponse(s),console.log("✅ Trading paused")}catch(s){throw console.error("❌ Failed to pause trading:",s),new Error(`Failed to pause trading: ${this.getErrorMessage(s)}`)}}async resumeTrading(){try{console.log("▶️ Resuming trading...");const s=await fetch(`${this.baseUrl}/trading/resume`,{method:"POST",signal:AbortSignal.timeout(1e4)});await this.handleResponse(s),console.log("✅ Trading resumed")}catch(s){throw console.error("❌ Failed to resume trading:",s),new Error(`Failed to resume trading: ${this.getErrorMessage(s)}`)}}async stopTrading(){try{console.log("⏹️ Stopping trading...");const s=await fetch(`${this.baseUrl}/trading/stop`,{method:"POST",signal:AbortSignal.timeout(1e4)});await this.handleResponse(s),console.log("✅ Trading stopped")}catch(s){throw console.error("❌ Failed to stop trading:",s),new Error(`Failed to stop trading: ${this.getErrorMessage(s)}`)}}async restartFromPoint(s,a){try{console.log("🔄 Restarting from point:",s);const r=await fetch(`${this.baseUrl}/restart/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionData:a}),signal:AbortSignal.timeout(2e4)});await this.handleResponse(r),console.log("✅ Restart initiated successfully")}catch(r){throw console.error("❌ Failed to restart from point:",r),new Error(`Failed to restart from point: ${this.getErrorMessage(r)}`)}}async closeTokenAccountsAndSendBalance(s){try{console.log("🧹 Closing token accounts...");const a=await fetch(`${this.baseUrl}/cleanup/close-accounts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionData:s}),signal:AbortSignal.timeout(3e4)});await this.handleResponse(a),console.log("✅ Token accounts closed successfully")}catch(a){throw console.error("❌ Failed to close token accounts:",a),new Error(`Failed to close token accounts: ${this.getErrorMessage(a)}`)}}async generateEnvFile(s){try{console.log("📄 Generating environment file...");const a=await fetch(`${this.baseUrl}/sessions/export-env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionData:s}),signal:AbortSignal.timeout(1e4)});await this.handleResponse(a);const r=await a.text();return console.log("✅ Environment file generated"),r}catch(a){throw console.error("❌ Failed to generate env file:",a),new Error(`Failed to generate env file: ${this.getErrorMessage(a)}`)}}async saveSwapConfig(s){try{console.log("💾 Saving swap configuration...");const a=await fetch(`${this.baseUrl}/config/swap`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:s}),signal:AbortSignal.timeout(1e4)});await this.handleResponse(a),console.log("✅ Swap configuration saved")}catch(a){throw console.error("❌ Failed to save swap configuration:",a),new Error(`Failed to save swap configuration: ${this.getErrorMessage(a)}`)}}async getSwapConfig(){try{console.log("🔍 Getting swap configuration...");const s=await fetch(`${this.baseUrl}/config/swap`,{signal:AbortSignal.timeout(1e4)});await this.handleResponse(s);const a=await s.json();return console.log("✅ Swap configuration retrieved"),a}catch(s){throw console.error("❌ Failed to get swap configuration:",s),new Error(`Failed to get swap configuration: ${this.getErrorMessage(s)}`)}}async testRpcConnection(s){try{console.log("🔍 Testing RPC connection:",s);const a=Date.now(),r=await fetch(`${this.baseUrl}/config/test-rpc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rpcUrl:s}),signal:AbortSignal.timeout(15e3)}),l=Date.now()-a;if(r.ok){const o=await r.json();return console.log("✅ RPC connection test successful:",o),{success:o.success,latency:l}}else return console.error("❌ RPC connection test failed"),{success:!1,latency:l}}catch(a){return console.error("❌ RPC connection test failed:",a),{success:!1,latency:0}}}async checkHealth(){try{const s=await fetch(`${this.baseUrl}/health`,{signal:AbortSignal.timeout(1e4)});return await this.handleResponse(s),await s.json()}catch(s){throw console.error("❌ Health check failed:",s),new Error(`Health check failed: ${this.getErrorMessage(s)}`)}}}const U=new ya,ja=()=>{const{status:t,reconnectAttempts:s,maxReconnectAttempts:a}=K(w=>w.websocket),[r,l]=x.useState("checking"),[o,m]=x.useState(!1);x.useEffect(()=>{u();const w=setInterval(u,3e4);return()=>clearInterval(w)},[]);const u=async()=>{if(!o){m(!0),l("checking");try{const w=await U.testConnection();l(w?"connected":"disconnected"),w||console.warn("Backend connection failed")}catch(w){console.error("Error checking backend connection:",w),l("disconnected")}finally{m(!1)}}},h=async()=>{E.loading("Reconnecting to backend...",{id:"reconnect"}),await u(),r==="connected"?E.success("Backend connection restored!",{id:"reconnect"}):E.error("Failed to connect to backend. Is the server running?",{id:"reconnect"})},p={ws:{icon:t==="connecting"?G:t==="connected"?Be:ft,text:t==="connecting"?"Connecting...":t==="connected"?"Connected":t==="error"?"Connection Error":"Disconnected",color:t==="connected"?"text-secondary":t==="connecting"?"text-yellow-500":"text-red-500",bgColor:t==="connected"?"bg-secondary/10":t==="connecting"?"bg-yellow-500/10":"bg-red-500/10",borderColor:t==="connected"?"border-secondary/20":t==="connecting"?"border-yellow-500/20":"border-red-500/20"},be:{icon:r==="checking"?G:r==="connected"?Be:ft,text:r==="checking"?"Checking...":r==="connected"?"Backend Connected":"Backend Offline",color:r==="connected"?"text-secondary":r==="checking"?"text-yellow-500":"text-red-500",bgColor:r==="connected"?"bg-secondary/10":r==="checking"?"bg-yellow-500/10":"bg-red-500/10",borderColor:r==="connected"?"border-secondary/20":r==="checking"?"border-yellow-500/20":"border-red-500/20"}},v=p.ws.icon,f=p.be.icon;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg border ${p.ws.bgColor} ${p.ws.borderColor}`,children:[e.jsx(v,{className:`w-4 h-4 ${p.ws.color} ${t==="connecting"?"animate-spin":t==="connected"?"connection-pulse connected":""}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${p.ws.color}`,children:p.ws.text}),s>0&&t!=="connected"&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Attempt ",s,"/",a]})]})]}),e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded-lg border ${p.be.bgColor} ${p.be.borderColor}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:`w-4 h-4 ${p.be.color} ${r==="checking"?"animate-spin":r==="connected"?"connection-pulse connected":""}`}),e.jsx("div",{className:`text-sm font-medium ${p.be.color}`,children:p.be.text})]}),r==="disconnected"&&e.jsxs("button",{onClick:h,disabled:o,className:"text-xs flex items-center space-x-1 text-primary hover:text-primary/80",children:[e.jsx(Q,{className:`w-3 h-3 ${o?"animate-spin":""}`}),e.jsx("span",{children:"Retry"})]})]})]})},Na=[{name:"Dashboard",href:"/",icon:gs},{name:"Sessions",href:"/sessions",icon:dt},{name:"Trading",href:"/trading",icon:ee},{name:"Wallets",href:"/wallets",icon:me},{name:"Monitoring",href:"/monitoring",icon:ke},{name:"Settings",href:"/settings",icon:ht}],ka=()=>{const t=ns(),{status:s}=K(l=>l.websocket),{currentSession:a}=K(l=>l.session),{status:r}=K(l=>l.trading);return e.jsxs("div",{className:"w-64 bg-card border-r border-border flex flex-col",children:[e.jsx("div",{className:"flex items-center px-6 py-4 border-b border-border",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-secondary rounded-lg flex items-center justify-center",children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold gradient-text",children:"Solana Bot"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Trading Dashboard"})]})]})}),e.jsx("div",{className:"px-6 py-3 border-b border-border",children:e.jsx(ja,{})}),a&&e.jsxs("div",{className:"px-6 py-3 border-b border-border",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1",children:"Active Session"}),e.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:a.tokenName}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.wallets.length," wallets"]})]}),r!=="idle"&&e.jsx("div",{className:"px-6 py-3 border-b border-border",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:`w-4 h-4 ${r==="running"?"text-secondary animate-pulse":r==="paused"?"text-yellow-500":r==="error"?"text-red-500":"text-muted-foreground"}`}),e.jsx("span",{className:"text-sm font-medium text-foreground capitalize",children:r})]})}),e.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1",children:Na.map(l=>{const o=t.pathname===l.href;return e.jsxs(ls,{to:l.href,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${o?"bg-primary/10 text-primary border-r-2 border-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,children:[e.jsx(l.icon,{className:`mr-3 h-5 w-5 transition-colors ${o?"text-primary":"text-muted-foreground group-hover:text-foreground"}`}),l.name]},l.name)})}),e.jsx("div",{className:"px-6 py-4 border-t border-border",children:e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"v1.0.0 • Built with React"})})]})},va=()=>{const t=re(),{theme:s}=K(m=>m.theme),{messages:a}=K(m=>m.websocket),r=a.filter(m=>m.type==="error"||m.type==="warning").length,l=m=>{t(_s(m))},o=[{value:"light",icon:us,label:"Light"},{value:"dark",icon:hs,label:"Dark"},{value:"system",icon:ps,label:"System"}];return e.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Trading Dashboard"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center bg-muted rounded-lg p-1",children:o.map(m=>{const u=m.icon,h=s===m.value;return e.jsx("button",{onClick:()=>l(m.value),className:`p-2 rounded-md transition-all duration-200 ${h?"bg-card text-primary shadow-sm":"text-muted-foreground hover:text-foreground"}`,title:m.label,children:e.jsx(u,{className:"w-4 h-4"})},m.value)})}),e.jsxs("button",{className:"relative p-2 text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(bs,{className:"w-5 h-5"}),r>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-accent-foreground text-xs rounded-full w-5 h-5 flex items-center justify-center",children:r>9?"9+":r})]}),e.jsxs("button",{className:"flex items-center space-x-2 p-2 text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(fs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Admin"})]})]})]})})},wa=({children:t})=>{const s=re(),{isDark:a}=K(r=>r.theme);return x.useEffect(()=>{s(Kt())},[s]),e.jsx("div",{className:`min-h-screen bg-background transition-colors duration-300 ${a?"dark":""}`,children:e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsx(ka,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(va,{}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})]})})},Sa=()=>{const t=os(),{currentSession:s}=K(f=>f.session),{status:a,currentLap:r,laps:l}=K(f=>f.trading),{adminWallet:o,tradingWallets:m,totalSolBalance:u,totalTokenBalance:h}=K(f=>f.wallet),{status:g}=K(f=>f.websocket),p=()=>{t("/sessions")},v=[{name:"Total SOL Balance",value:u.toFixed(6),icon:X,color:"text-primary",bgColor:"bg-primary/10"},{name:"Total Token Balance",value:h.toFixed(2),icon:ee,color:"text-secondary",bgColor:"bg-secondary/10"},{name:"Active Wallets",value:m.filter(f=>f.isActive).length.toString(),icon:ae,color:"text-accent",bgColor:"bg-accent/10"},{name:"Trading Laps",value:l.length.toString(),icon:Y,color:"text-orange-500",bgColor:"bg-orange-500/10"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor your Solana trading bot performance"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ${g==="connected"?"bg-secondary/10 text-secondary":"bg-red-500/10 text-red-500"}`,children:[g==="connected"?e.jsx(_,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"capitalize",children:g})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v.map(f=>{const w=f.icon;return e.jsx("div",{className:"card p-6 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:f.name}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:f.value})]}),e.jsx("div",{className:`p-3 rounded-lg ${f.bgColor}`,children:e.jsx(w,{className:`w-6 h-6 ${f.color}`})})]})},f.name)})}),s?e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Current Session"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Token Information"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:s.tokenName}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:s.tokenAddress})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Admin Wallet"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:o?.publicKey}),e.jsxs("p",{className:"text-sm text-foreground",children:[o?.solBalance.toFixed(6)," SOL"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Session Details"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-foreground",children:[s.wallets.length," Trading Wallets"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",s.timestamp]})]})]})]})]}):e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx(me,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Active Session"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a new session or load an existing one to get started"}),e.jsx("button",{onClick:p,className:"btn btn-primary inline-flex items-center",children:"Create Session"})]}),a!=="idle"&&e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Trading Status"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${a==="running"?"bg-secondary animate-pulse":a==="paused"?"bg-yellow-500":a==="error"?"bg-red-500":"bg-muted-foreground"}`}),e.jsx("span",{className:"text-lg font-medium text-foreground capitalize",children:a})]}),r&&e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current Lap: ",r.lapNumber]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Started: ",new Date(r.startTime).toLocaleTimeString()]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Recent Activity"}),l.length>0&&e.jsxs("button",{onClick:()=>t("/trading"),className:"text-primary hover:text-primary/80 text-sm font-medium flex items-center",children:["View All ",e.jsx(Ke,{className:"w-4 h-4 ml-1"})]})]}),e.jsxs("div",{className:"space-y-3",children:[l.slice(-5).map(f=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${f.status==="completed"?"bg-secondary":f.status==="failed"?"bg-red-500":"bg-yellow-500"}`}),e.jsxs("span",{className:"text-sm text-foreground",children:["Lap ",f.lapNumber]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-foreground",children:[f.totalSolCollected.toFixed(6)," SOL"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:f.endTime?new Date(f.endTime).toLocaleTimeString():"Running..."})]})]},f.lapNumber)),l.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No trading activity yet"})]})]})]})]})},Ca=({onSelectSession:t})=>{const s=re(),[a,r]=x.useState([]),[l,o]=x.useState([]),[m,u]=x.useState(!1),[h,g]=x.useState(""),[p,v]=x.useState("date"),[f,w]=x.useState("desc"),[$,T]=x.useState(null);x.useEffect(()=>{L()},[]),x.useEffect(()=>{P()},[a,h,p,f]);const L=async()=>{u(!0);try{const d=await U.getSessionFiles();r(d)}catch(d){E.error(`Failed to load session files: ${d instanceof Error?d.message:String(d)}`)}finally{u(!1)}},P=()=>{let d=a.filter(j=>j.filename.toLowerCase().includes(h.toLowerCase())||j.tokenName.toLowerCase().includes(h.toLowerCase()));d.sort((j,N)=>{let i=0;switch(p){case"name":i=j.tokenName.localeCompare(N.tokenName);break;case"date":i=j.lastModified.getTime()-N.lastModified.getTime();break;case"size":i=j.size-N.size;break}return f==="asc"?i:-i}),o(d)},S=async d=>{s(Ct(!0));try{const j=await U.loadSession(d),N={number:j.admin.number,publicKey:j.admin.address,privateKey:j.admin.privateKey,solBalance:0,tokenBalance:0,isActive:!0},i=j.wallets.map(O=>({number:O.number,publicKey:O.address,privateKey:O.privateKey,solBalance:0,tokenBalance:0,isActive:!1,generationTimestamp:O.generationTimestamp})),k=await U.getWalletBalances([N,...i]),C=k.find(O=>O.number===0),F=k.filter(O=>O.number>0);s(Vt(j)),s(Qe(C||N)),s(Ne(F)),E.success(`Session loaded: ${j.tokenName}`),t(d)}catch(j){s(Ys(`Failed to load session: ${j instanceof Error?j.message:String(j)}`)),E.error(`Failed to load session: ${j instanceof Error?j.message:String(j)}`)}finally{s(Ct(!1))}},n=async d=>{if(confirm(`Are you sure you want to delete ${d}?`))try{await U.deleteSession(d),r(a.filter(j=>j.filename!==d)),E.success("Session deleted successfully")}catch(j){E.error(`Failed to delete session: ${j instanceof Error?j.message:String(j)}`)}},c=async d=>{try{const j=await U.loadSession(d),N=await U.generateEnvFile(j),i=new Blob([N],{type:"text/plain"}),k=URL.createObjectURL(i),C=document.createElement("a");C.href=k,C.download=`${j.tokenName}_${j.timestamp}.env`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(k),E.success("Environment file exported successfully")}catch(j){E.error(`Failed to export session: ${j instanceof Error?j.message:String(j)}`)}},y=d=>{if(d===0)return"0 Bytes";const j=1024,N=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(d)/Math.log(j));return parseFloat((d/Math.pow(j,i)).toFixed(2))+" "+N[i]},b=d=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(d);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Session Files"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l.length," session",l.length!==1?"s":""," found"]})]}),e.jsx("button",{onClick:L,disabled:m,className:"px-4 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:"Refresh"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search sessions...",value:h,onChange:d=>g(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-solana-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:`${p}-${f}`,onChange:d=>{const[j,N]=d.target.value.split("-");v(j),w(N)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-solana-500 focus:border-transparent",children:[e.jsx("option",{value:"date-desc",children:"Newest First"}),e.jsx("option",{value:"date-asc",children:"Oldest First"}),e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"}),e.jsx("option",{value:"size-desc",children:"Largest First"}),e.jsx("option",{value:"size-asc",children:"Smallest First"})]})]})]}),m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-solana-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading sessions..."})]}):l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Sessions Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h?"No sessions match your search criteria.":"Create your first session to get started."})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:l.map(d=>e.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-sm border-2 transition-all duration-200 hover:shadow-md ${$===d.filename?"border-solana-500 bg-solana-50 dark:bg-solana-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-solana-500 rounded-lg flex items-center justify-center",children:e.jsx(dt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:d.tokenName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.timestamp})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>T($===d.filename?null:d.filename),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(ys,{className:"w-4 h-4"})}),$===d.filename&&e.jsxs("div",{className:"absolute right-0 top-8 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-[160px]",children:[e.jsxs("button",{onClick:()=>{S(d.filename),T(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center space-x-2",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Load Session"})]}),e.jsxs("button",{onClick:()=>{c(d.filename),T(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Export .env"})]}),e.jsxs("button",{onClick:()=>{n(d.filename),T(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center space-x-2",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(ae,{className:"w-4 h-4 text-gray-400"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d.walletCount}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Wallets"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(Je,{className:"w-4 h-4 text-gray-400"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y(d.size)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Size"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(Lt,{className:"w-4 h-4 text-gray-400"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:b(d.lastModified).split(",")[0]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Modified"})]})]}),e.jsx("button",{onClick:()=>S(d.filename),className:"w-full px-4 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg transition-colors",children:"Load Session"})]})},d.filename))})]})},At=[{id:1,name:"After Token Discovery",description:"Restart from token validation and pool discovery",available:!0},{id:2,name:"After Admin Wallet Creation",description:"Restart from admin wallet setup and funding",available:!0},{id:3,name:"After Wallet Generation",description:"Restart from trading wallet creation",available:!0},{id:4,name:"After Wallet Funding",description:"Restart from SOL distribution to wallets",available:!0},{id:5,name:"Token Transfer to Wallets",description:"Restart from token distribution phase",available:!0},{id:6,name:"Close Token Account & Send Balance to Admin",description:"Clean up and consolidate all balances",available:!0}],Ta=({isOpen:t,onClose:s,sessionFilename:a})=>{re();const{currentSession:r}=K(g=>g.session),[l,o]=x.useState(null),[m,u]=x.useState(!1),h=async()=>{if(!l||!r){E.error("Please select a restart point");return}u(!0);try{await U.restartFromPoint(l,r);const g=At.find(p=>p.id===l)?.name;E.success(`Restarting from: ${g}`),s()}catch(g){E.error(`Failed to restart session: ${g instanceof Error?g.message:String(g)}`)}finally{u(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Select Restart Point"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Choose where to restart the session: ",a]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(Et,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[r&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Current Session Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Token:"}),e.jsx("span",{className:"ml-2 text-blue-800 dark:text-blue-300",children:r.tokenName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Wallets:"}),e.jsx("span",{className:"ml-2 text-blue-800 dark:text-blue-300",children:r.wallets.length})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Admin:"}),e.jsxs("span",{className:"ml-2 text-blue-800 dark:text-blue-300 font-mono text-xs",children:[r.admin.address.slice(0,8),"...",r.admin.address.slice(-8)]})]})]})]}),e.jsx("div",{className:"space-y-3",children:At.map(g=>e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ${l===g.id?"border-solana-500 bg-solana-50 dark:bg-solana-900/20":g.available?"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600":"border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-900 opacity-50 cursor-not-allowed"}`,onClick:()=>g.available&&o(g.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${l===g.id?"bg-solana-500 text-white":g.available?"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400":"bg-gray-100 dark:bg-gray-800 text-gray-400"}`,children:g.id}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:`font-medium ${g.available?"text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:g.name}),g.available?e.jsx(_,{className:"w-4 h-4 text-green-500"}):e.jsx(J,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("p",{className:`text-sm mt-1 ${g.available?"text-gray-600 dark:text-gray-400":"text-gray-500 dark:text-gray-500"}`,children:g.description})]})]})},g.id))}),l&&e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(V,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mt-1",children:"Restarting from this point will execute the corresponding backend function from your index.ts file. Make sure you have the necessary funds and configurations in place."})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:h,disabled:!l||m,className:"flex items-center px-6 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Restarting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Restart Session"]})})]})]})}):null},Aa=({onTokenValidated:t,initialAddress:s="",showFullInterface:a=!0})=>{const[r,l]=x.useState(s),[o,m]=x.useState(!1),[u,h]=x.useState(null),[g,p]=x.useState(null),v=async()=>{if(!r.trim()){p("Please enter a token address");return}if(r.length<32||r.length>44){p("Invalid Solana token address format");return}m(!0),p(null),h(null);try{console.log("🔍 Validating token with backend:",r);const w=await U.validateTokenAddress(r);if(console.log("✅ Token validation result:",w),!w.isValid||!w.tokenData)throw new Error("Token not found or not tradeable. Please check the address.");console.log("✅ Token data received:",w.tokenData),h(w.tokenData),console.log("🔍 Getting pool information...");const $=await U.getPoolKeys(r);if(console.log("✅ Pool keys received:",$),!$)throw new Error("This token is not available for trading on Raydium");console.log("✅ Pool information confirmed"),t(w.tokenData,$),E.success(`${w.tokenData.name} is ready for trading!`)}catch(w){console.error("❌ Token validation error:",w);const $=w instanceof Error?w.message:String(w)||"Failed to validate token";p($),E.error($)}finally{m(!1)}},f=w=>{w.key==="Enter"&&!o&&v()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Token Address"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("input",{type:"text",value:r,onChange:w=>l(w.target.value),onKeyPress:f,placeholder:"Enter token address to start trading...",className:"flex-1 px-4 py-3 border border-input rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:o}),e.jsx("button",{onClick:v,disabled:o||!r.trim(),className:"px-6 py-3 bg-primary hover:bg-primary/90 text-primary-foreground font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Validating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Validate Token"})]})})]}),g&&e.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-red-500",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:g})]})]}),u&&e.jsxs("div",{className:"bg-secondary/10 border border-secondary/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(_,{className:"w-5 h-5 text-secondary"}),e.jsxs("h3",{className:"font-medium text-foreground",children:[u.name," (",u.symbol,") - Ready for Trading!"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-secondary font-medium",children:"Price"}),e.jsxs("div",{className:"text-foreground",children:["$",u.price]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-secondary font-medium",children:"24h Volume"}),e.jsxs("div",{className:"text-foreground",children:["$",u.volume?.h24]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-secondary font-medium",children:"24h Change"}),e.jsxs("div",{className:`${u.priceChange?.h24?.toString().startsWith("+")?"text-secondary":"text-red-500"}`,children:[u.priceChange?.h24,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-secondary font-medium",children:"24h Trades"}),e.jsx("div",{className:"text-foreground",children:(u.txns?.h24?.buys||0)+(u.txns?.h24?.sells||0)})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:e.jsxs("a",{href:`https://solscan.io/token/${u.address}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-primary hover:text-primary/80 transition-colors",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"View on Solscan"})]})})]}),o&&e.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(G,{className:"w-5 h-5 text-primary animate-spin"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-foreground",children:"Validating Token..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Checking if this token is available for trading"})]})]})})]})},$a=({isOpen:t,onClose:s})=>{const a=re(),[r,l]=x.useState(1),[o,m]=x.useState(!1),[u,h]=x.useState(null),[g,p]=x.useState(""),[v,f]=x.useState(null),[w,$]=x.useState(null),[T,L]=x.useState(""),[P,S]=x.useState("create"),[n,c]=x.useState(""),[y,b]=x.useState(!1),[d,j]=x.useState(null),[N,i]=x.useState(10),[k,C]=x.useState(1),[F,O]=x.useState([]),B=[{id:1,name:"Token Discovery",description:"Find and validate your token"},{id:2,name:"Admin Wallet",description:"Set up your admin wallet"},{id:3,name:"Trading Wallets",description:"Generate trading wallets"},{id:4,name:"Fund Wallets",description:"Distribute SOL to wallets"},{id:5,name:"Token Distribution",description:"Distribute tokens (optional)"},{id:6,name:"Start Trading",description:"Choose strategy and begin"}],A=()=>{l(1),p(""),f(null),$(null),L(""),S("create"),c(""),b(!1),j(null),i(10),C(1),O([]),h(null),m(!1)},I=()=>{A(),s()},R=(M,q)=>{f(M),p(M.address),$(q),new Date().toISOString();const fe=`${M.name}_${new Date().toLocaleDateString().replace(/\//g,".")}_${new Date().toLocaleTimeString().replace(/:/g,".")}_session.json`;L(fe),h(null),E.success(`${M.name} validated and ready for trading!`)},W=async()=>{m(!0),h(null);try{let M;if(P==="import"){if(!n.trim())return h("Please enter admin wallet private key"),!1;M=await U.importAdminWallet(n)}else M=await U.createAdminWallet();return j(M),E.success("Admin wallet ready! Please fund it with SOL before continuing."),!0}catch(M){return h(`Failed to create admin wallet: ${M instanceof Error&&M instanceof Error?M.message:String(M)}`),!1}finally{m(!1)}},H=async()=>{if(N<1||N>100)return h("Wallet count must be between 1 and 100"),!1;m(!0),h(null);try{const M=await U.generateTradingWallets(N);return O(M),E.success(`Generated ${M.length} trading wallets`),!0}catch(M){return h(`Failed to generate trading wallets: ${M instanceof Error?M.message:String(M)}`),!1}finally{m(!1)}},z=async()=>{if(!d||F.length===0)return h("Admin wallet and trading wallets are required"),!1;if(k<=0)return h("SOL amount must be greater than 0"),!1;m(!0),h(null);try{const M=await U.distributeSol(d,F,k);return O(M),E.success(`Successfully distributed SOL to ${M.length} wallets`),!0}catch(M){return h(`Failed to distribute SOL to wallets: ${M instanceof Error?M.message:String(M)}`),!1}finally{m(!1)}},ne=async()=>{m(!0),h(null);try{const M=await U.getAdminTokenBalance(d,g);if(M>0){const q=M/F.length,fe=await U.distributeTokens(d,F,g,q);O(fe),E.success("Tokens distributed to trading wallets")}else E("No tokens found in admin wallet - skipping token distribution",{icon:"ℹ️"});return!0}catch(M){const q=M instanceof Error?M.message:String(M);return console.warn("Token distribution failed (this is expected if admin wallet has no tokens or SOL):",q),q.includes("no record of a prior credit")||q.includes("insufficient funds")||q.includes("Maximum call stack size exceeded")?(E("Admin wallet has no tokens or SOL for fees - skipping token distribution",{icon:"ℹ️"}),!0):(h(`Failed to distribute tokens: ${q}`),!1)}finally{m(!1)}},be=async M=>{if(!v||!d||F.length===0||!w){h("All steps must be completed");return}m(!0),h(null);try{const q={admin:{number:d.number,address:d.publicKey,privateKey:d.privateKey},wallets:F.map(he=>({number:he.number,address:he.publicKey,privateKey:he.privateKey,generationTimestamp:he.generationTimestamp})),tokenAddress:g,poolKeys:w,tokenName:v.name,timestamp:new Date().toISOString()},fe=await U.saveSession(q);console.log("Session saved:",fe),await U.startTrading(M,q),a(Vt(q)),a(Qe(d)),a(Ne(F)),E.success(`Trading started with ${M.replace("_"," ").toLowerCase()}!`),I()}catch(q){h(`Failed to start trading: ${q instanceof Error?q.message:String(q)}`)}finally{m(!1)}},ue=()=>{switch(r){case 1:return!!(v&&w);case 2:return!!d;case 3:return F.length>0;case 4:return!0;case 5:return!0;default:return!1}},at=async()=>{let M=!1;switch(r){case 1:M=!!(v&&w),M||h("Please validate a token first");break;case 2:M=await W();break;case 3:M=await H();break;case 4:M=await z();break;case 5:M=await ne();break;case 6:return}M&&(l(r+1),h(null))},Ge=()=>{r>1&&(l(r-1),h(null))};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-card rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Start Trading Session"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Step ",r," of ",B.length,": ",B[r-1].name]}),T&&e.jsxs("p",{className:"text-xs text-secondary mt-1",children:["Session: ",T]})]}),e.jsx("button",{onClick:I,className:"p-2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(Et,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"px-6 py-4 bg-muted/30",children:e.jsx("div",{className:"flex items-center justify-between",children:B.map((M,q)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${r>M.id?"bg-secondary text-secondary-foreground":r===M.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:r>M.id?e.jsx(js,{className:"w-4 h-4"}):M.id}),q<B.length-1&&e.jsx("div",{className:`w-8 h-1 mx-1 ${r>M.id?"bg-secondary":"bg-muted"}`})]},M.id))})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[u&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center space-x-2",children:[e.jsx(V,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-500",children:u})]}),r===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Find Your Token"}),e.jsx("p",{className:"text-muted-foreground",children:"Enter a token address to check if it's available for trading."})]}),e.jsx(Aa,{onTokenValidated:R,initialAddress:g,showFullInterface:!0})]}),r===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Set Up Admin Wallet"}),e.jsx("p",{className:"text-muted-foreground",children:"This wallet will control your trading session and hold your funds."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>S("create"),className:`p-4 border-2 rounded-lg text-left transition-colors ${P==="create"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Create New Wallet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate a fresh wallet for trading"})]}),e.jsxs("button",{onClick:()=>S("import"),className:`p-4 border-2 rounded-lg text-left transition-colors ${P==="import"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Import Existing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use your existing wallet"})]})]}),P==="import"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Private Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",value:n,onChange:M=>c(M.target.value),placeholder:"Enter your wallet private key...",className:"w-full px-4 py-3 pr-12 border border-input rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>b(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:y?e.jsx(Oe,{className:"w-4 h-4"}):e.jsx(He,{className:"w-4 h-4"})})]})]}),d&&e.jsxs("div",{className:"bg-secondary/10 border border-secondary/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-secondary mb-2",children:"Admin Wallet Ready"}),e.jsx("p",{className:"text-sm text-foreground font-mono",children:d.publicKey}),e.jsx("p",{className:"text-xs text-secondary mt-1",children:"⚠️ Fund this wallet with SOL before proceeding to the next step"})]})]}),r===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Generate Trading Wallets"}),e.jsx("p",{className:"text-muted-foreground",children:"These wallets will execute your trading strategy."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Number of Trading Wallets (1-100)"}),e.jsx("input",{type:"number",min:"1",max:"100",value:N,onChange:M=>i(parseInt(M.target.value)||1),className:"w-full px-4 py-3 border border-input rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"More wallets = more trading activity but higher SOL requirements"})]}),F.length>0&&e.jsxs("div",{className:"bg-secondary/10 border border-secondary/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-secondary mb-2",children:[F.length," Trading Wallets Generated"]}),e.jsx("p",{className:"text-sm text-foreground",children:"Ready for SOL distribution in the next step"})]})]}),r===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Fund Trading Wallets"}),e.jsx("p",{className:"text-muted-foreground",children:"Distribute SOL from your admin wallet to the trading wallets."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Total SOL Amount to Distribute"}),e.jsx("input",{type:"number",step:"0.001",min:"0.001",value:k,onChange:M=>C(parseFloat(M.target.value)||0),className:"w-full px-4 py-3 border border-input rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Each wallet will receive approximately ",(k/N).toFixed(6)," SOL"]})]}),F.some(M=>M.solBalance>0)&&e.jsxs("div",{className:"bg-secondary/10 border border-secondary/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-secondary mb-2",children:"SOL Distribution Complete"}),e.jsxs("p",{className:"text-sm text-foreground",children:[F.filter(M=>M.solBalance>0).length," wallets funded successfully"]})]})]}),r===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Token Distribution (Optional)"}),e.jsxs("p",{className:"text-muted-foreground",children:["If your admin wallet has ",v?.symbol," tokens, they'll be distributed automatically."]})]}),e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-primary mb-2",children:"Automatic Token Check"}),e.jsxs("p",{className:"text-sm text-foreground",children:["The system will check if your admin wallet has any ",v?.symbol," tokens and distribute them to your trading wallets. If no tokens are found, this step will be skipped."]})]})]}),r===6&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Choose Trading Strategy"}),e.jsx("p",{className:"text-muted-foreground",children:"Select your trading strategy and start automated trading."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>be("INCREASE_MAKERS_VOLUME"),disabled:o,className:"p-6 border-2 border-border rounded-lg text-left hover:border-primary hover:bg-primary/5 transition-colors disabled:opacity-50",children:[e.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Increase Makers + Volume"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive strategy to boost both unique traders and trading volume"})]}),e.jsxs("button",{onClick:()=>be("INCREASE_VOLUME_ONLY"),disabled:o,className:"p-6 border-2 border-border rounded-lg text-left hover:border-primary hover:bg-primary/5 transition-colors disabled:opacity-50",children:[e.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Volume Only"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Focus on maximizing trading volume for your token"})]})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Session Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Token:"}),e.jsxs("span",{className:"ml-2 text-foreground",children:[v?.name," (",v?.symbol,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Trading Wallets:"}),e.jsx("span",{className:"ml-2 text-foreground",children:F.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total SOL:"}),e.jsxs("span",{className:"ml-2 text-foreground",children:[k," SOL"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SOL per wallet:"}),e.jsxs("span",{className:"ml-2 text-foreground",children:[(k/N).toFixed(6)," SOL"]})]})]})]})]})]}),r<6&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-border",children:[e.jsxs("button",{onClick:Ge,disabled:r===1||o,className:"flex items-center px-4 py-2 text-muted-foreground hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("button",{onClick:at,disabled:o||!ue(),className:"btn btn-primary flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[o?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ke,{className:"w-4 h-4 mr-2"}),o?"Processing...":"Next"]})]})]})}):null},La=()=>{const{currentSession:t}=K(v=>v.session),[s,a]=x.useState(!1),[r,l]=x.useState(!1),[o,m]=x.useState(null),u=v=>{m(v)},h=()=>{t&&l(!0)},g=()=>{console.log("Starting new session flow..."),a(!0)},p=()=>{console.log("Closing main flow..."),a(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Session Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, load, and manage your trading sessions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[t&&e.jsxs("button",{onClick:h,className:"flex items-center px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Restart Session"]}),e.jsxs("button",{onClick:g,className:"flex items-center px-4 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"New Session"]})]})]}),t&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Active Session"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Loaded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Token"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.tokenName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:[t.tokenAddress.slice(0,8),"...",t.tokenAddress.slice(-8)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Admin Wallet"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white font-mono",children:[t.admin.address.slice(0,8),"...",t.admin.address.slice(-8)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Trading Wallets"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.wallets.length})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.timestamp})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsx(Ca,{onSelectSession:u})}),e.jsx($a,{isOpen:s,onClose:p}),t&&e.jsx(Ta,{isOpen:r,onClose:()=>l(!1),sessionFilename:o||`${t.tokenName}_${t.timestamp}_session.json`})]})},Ea=({status:t,strategy:s,selectedStrategy:a,onStrategyChange:r,onStart:l,onPause:o,onResume:m,onStop:u,isLoading:h,canStart:g})=>{const p=[{value:"INCREASE_MAKERS_VOLUME",name:"Makers + Volume",description:"Increase unique traders and trading volume",icon:se,duration:"3 minutes",color:"border-primary bg-primary/10"},{value:"INCREASE_VOLUME_ONLY",name:"Volume Only",description:"Focus on maximizing trading volume",icon:we,duration:"20 minutes",color:"border-secondary bg-secondary/10"}];return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ht,{className:"w-5 h-5 text-muted-foreground"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Trading Controls"})]}),s&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Active: ",s.replace("_"," ").toLowerCase()]})]}),t==="idle"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Select Trading Strategy"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(v=>{const f=v.icon,w=a===v.value;return e.jsx("button",{onClick:()=>r(v.value),className:`p-4 border-2 rounded-lg text-left transition-all duration-200 ${w?v.color:"border-border hover:border-muted-foreground"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(f,{className:`w-6 h-6 mt-1 ${w?"text-current":"text-muted-foreground"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground",children:v.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v.description}),e.jsx("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:e.jsxs("span",{children:["Duration: ",v.duration]})})]})]})},v.value)})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[t==="idle"&&e.jsxs("button",{onClick:l,disabled:!g||h,className:"btn btn-secondary flex items-center",children:[h?e.jsx(G,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(ve,{className:"w-5 h-5 mr-2"}),"Start Trading"]}),t==="running"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o,disabled:h,className:"btn flex items-center bg-yellow-500 text-white hover:bg-yellow-600 disabled:opacity-50",children:[h?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(et,{className:"w-4 h-4 mr-2"}),"Pause"]}),e.jsxs("button",{onClick:u,disabled:h,className:"btn flex items-center bg-red-500 text-white hover:bg-red-600 disabled:opacity-50",children:[h?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(yt,{className:"w-4 h-4 mr-2"}),"Stop"]})]}),t==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:m,disabled:h,className:"btn btn-secondary flex items-center",children:[h?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Resume"]}),e.jsxs("button",{onClick:u,disabled:h,className:"btn flex items-center bg-red-500 text-white hover:bg-red-600 disabled:opacity-50",children:[h?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(yt,{className:"w-4 h-4 mr-2"}),"Stop"]})]}),(t==="stopped"||t==="error")&&e.jsxs("button",{onClick:l,disabled:!g||h,className:"btn btn-secondary flex items-center",children:[h?e.jsx(G,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(ve,{className:"w-5 h-5 mr-2"}),"Restart Trading"]})]}),!g&&t==="idle"&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-500",children:"Complete session setup with admin wallet and trading wallets before starting."})})]})},Fa=({wallets:t,walletStatuses:s,globalTradingFlag:a,tokenSymbol:r="Tokens"})=>{const l=p=>{const v=s.get(p.publicKey);return v||{...p,isTrading:!1,lastUpdate:null}},o=p=>{const v=l(p);return a?v.isTrading?e.jsx(Y,{className:"w-4 h-4 text-green-500 animate-pulse"}):v.isActive?e.jsx(_,{className:"w-4 h-4 text-blue-500"}):e.jsx(tt,{className:"w-4 h-4 text-red-500"}):e.jsx(et,{className:"w-4 h-4 text-gray-400"})},m=p=>{const v=l(p);return a?v.isTrading?"Trading":v.isActive?"Ready":"Inactive":"Paused"},u=p=>{const v=l(p);return a?v.isTrading?"text-green-500":v.isActive?"text-blue-500":"text-red-500":"text-gray-500"},h=p=>`${p.slice(0,6)}...${p.slice(-6)}`,g=p=>p?new Date(p).toLocaleTimeString():"Never";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Wallet Trading Status"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t.filter(p=>l(p).isTrading).length," Trading"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t.filter(p=>l(p).isActive&&!l(p).isTrading).length," Ready"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(p=>{const v=l(p);return e.jsxs("div",{className:`p-4 border-2 rounded-lg transition-all duration-200 ${v.isTrading?"border-green-500 bg-green-50 dark:bg-green-900/20":v.isActive?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["#",p.number]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[o(p),e.jsx("span",{className:`text-xs font-medium ${u(p)}`,children:m(p)})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:h(p.publicKey)})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(X,{className:"w-3 h-3 text-solana-600 dark:text-solana-400"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SOL"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.solBalance?.toFixed(4)||"0.0000"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(te,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.tokenBalance?.toFixed(2)||"0.00"})]})]}),v.isTrading&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ee,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Buy Phase"})]}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-green-500 h-1 rounded-full transition-all duration-1000",style:{width:`${Math.random()*100}%`}})})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsx("span",{children:"Last Update"})]}),e.jsx("span",{children:g(v.lastUpdate)})]})})]},p.publicKey)})}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Trading Wallets"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generate trading wallets to monitor their trading activity"})]})]})},Ra=({currentLap:t,laps:s,elapsedTime:a,timeLeft:r,duration:l,status:o})=>{const m=g=>{const p=Math.floor(g/1e3),v=Math.floor(p/60),f=p%60;return`${v}:${f.toString().padStart(2,"0")}`},u=()=>l===0?0:Math.min(a/l*100,100),h=g=>{switch(g){case"running":return e.jsx(ve,{className:"w-4 h-4 text-blue-500"});case"completed":return e.jsx(_,{className:"w-4 h-4 text-green-500"});case"failed":return e.jsx(V,{className:"w-4 h-4 text-red-500"});default:return e.jsx(et,{className:"w-4 h-4 text-gray-400"})}};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Trading Lap Monitor"})]}),t&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsxs("span",{children:["Lap #",t.lapNumber]})]})]}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${o==="running"?"bg-green-500 animate-pulse":o==="paused"?"bg-yellow-500":"bg-gray-400"}`}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["Current Lap #",t.lapNumber]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m(a)," / ",m(l)]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[m(r)," remaining"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-1000 ${o==="running"?"bg-green-500":o==="paused"?"bg-yellow-500":"bg-gray-400"}`,style:{width:`${u()}%`}})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:t.totalSolCollected.toFixed(6)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SOL Collected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:t.totalTokensCollected.toFixed(2)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tokens Collected"})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Active Lap"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Start trading to begin monitoring lap progress"})]}),s.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Recent Laps"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.slice(-5).reverse().map(g=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[h(g.status),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Lap #",g.lapNumber]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[g.totalSolCollected.toFixed(4)," SOL"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:g.endTime?new Date(g.endTime).toLocaleTimeString():"Running..."})]})]},g.lapNumber))})]})]})},$t=({transactions:t,onTransactionUpdate:s,tokenSymbol:a="TOKEN",isActive:r=!1})=>{const[l,o]=x.useState("all"),[m,u]=x.useState("timestamp"),[h,g]=x.useState([]),[p,v]=x.useState({totalTransactions:0,successfulTransactions:0,failedTransactions:0,totalVolume:0,totalFees:0,averageSlippage:0,successRate:0});x.useEffect(()=>{if(!r)return;const n=setInterval(()=>{if(Math.random()>.6){const c={id:Date.now().toString()+Math.random().toString(36).substr(2,9),walletNumber:Math.floor(Math.random()*10)+1,walletAddress:`${Math.random().toString(36).substr(2,8)}...${Math.random().toString(36).substr(2,8)}`,type:Math.random()>.5?"buy":"sell",amount:Math.random()*.1+.001,tokenAmount:Math.random()*1e3+100,status:Math.random()>.15?"success":Math.random()>.5?"failed":"pending",timestamp:Date.now(),txHash:Math.random()>.1?`${Math.random().toString(36).substr(2,9)}...${Math.random().toString(36).substr(2,9)}`:void 0,error:Math.random()>.9?"Insufficient balance for transaction":void 0,retryCount:Math.random()>.8?Math.floor(Math.random()*3):0,maxRetries:3,gasUsed:Math.random()*.001+1e-4,slippage:Math.random()*5+.5,priceImpact:Math.random()*2+.1};g(y=>[c,...y.slice(0,99)])}},1500);return()=>clearInterval(n)},[r]),x.useEffect(()=>{const n=[...h,...t],c=n.filter(d=>d.status==="success"),y=n.filter(d=>d.status==="failed"),b={totalTransactions:n.length,successfulTransactions:c.length,failedTransactions:y.length,totalVolume:c.reduce((d,j)=>d+j.amount,0),totalFees:c.reduce((d,j)=>d+(j.gasUsed||0),0),averageSlippage:c.length>0?c.reduce((d,j)=>d+(j.slippage||0),0)/c.length:0,successRate:n.length>0?c.length/n.length*100:0};v(b)},[h,t]),x.useEffect(()=>{s(h)},[h,s]);const f=[...h,...t],w=f.filter(n=>l==="all"?!0:l==="buy"||l==="sell"?n.type===l:l==="success"||l==="failed"||l==="pending"?n.status===l:!0).sort((n,c)=>{switch(m){case"timestamp":return c.timestamp-n.timestamp;case"amount":return c.amount-n.amount;case"status":return n.status.localeCompare(c.status);default:return c.timestamp-n.timestamp}}),$=n=>{switch(n){case"success":return e.jsx(_,{className:"w-4 h-4 text-green-500"});case"failed":return e.jsx(tt,{className:"w-4 h-4 text-red-500"});case"pending":return e.jsx(J,{className:"w-4 h-4 text-yellow-500 animate-spin"});case"retrying":return e.jsx(Q,{className:"w-4 h-4 text-blue-500 animate-spin"});default:return e.jsx(Y,{className:"w-4 h-4 text-gray-400"})}},T=n=>n==="buy"?e.jsx(ee,{className:"w-4 h-4 text-green-500"}):e.jsx(We,{className:"w-4 h-4 text-red-500"}),L=n=>new Date(n).toLocaleTimeString(),P=n=>n.toFixed(6),S=[{value:"all",label:"All",count:f.length},{value:"buy",label:"Buys",count:f.filter(n=>n.type==="buy").length},{value:"sell",label:"Sells",count:f.filter(n=>n.type==="sell").length},{value:"success",label:"Success",count:f.filter(n=>n.status==="success").length},{value:"failed",label:"Failed",count:f.filter(n=>n.status==="failed").length},{value:"pending",label:"Pending",count:f.filter(n=>n.status==="pending").length}];return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Live Transaction Monitor"}),r&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Live"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("select",{value:m,onChange:n=>u(n.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-solana-500 focus:border-transparent",children:[e.jsx("option",{value:"timestamp",children:"Latest First"}),e.jsx("option",{value:"amount",children:"Amount"}),e.jsx("option",{value:"status",children:"Status"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Volume"})]}),e.jsxs("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:[p.totalVolume.toFixed(4)," SOL"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(se,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Success Rate"})]}),e.jsxs("div",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:[p.successRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(we,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Avg Slippage"})]}),e.jsxs("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:[p.averageSlippage.toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(X,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Total Fees"})]}),e.jsxs("div",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:[p.totalFees.toFixed(6)," SOL"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:S.map(n=>e.jsxs("button",{onClick:()=>o(n.value),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${l===n.value?"bg-solana-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[n.label," (",n.count,")"]},n.value))}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:w.length>0?w.map(n=>e.jsxs("div",{className:`p-4 border rounded-lg transition-all duration-200 hover:shadow-md ${n.status==="success"?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":n.status==="failed"?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":n.status==="pending"?"border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[$(n.status),T(n.type)]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Wallet #",n.walletNumber]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${n.type==="buy"?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:n.type.toUpperCase()}),n.retryCount&&n.retryCount>0&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",children:["Retry ",n.retryCount,"/",n.maxRetries]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:L(n.timestamp)}),e.jsx("span",{className:"font-mono",children:n.walletAddress}),n.txHash&&e.jsxs("a",{href:`https://solscan.io/tx/${n.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-500 hover:text-blue-600 transition-colors",children:[e.jsx(pt,{className:"w-3 h-3"}),e.jsx("span",{children:"Solscan"})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[P(n.amount)," SOL"]}),n.tokenAmount&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n.tokenAmount.toFixed(2)," ",a]}),n.slippage&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Slippage: ",n.slippage.toFixed(2),"%"]})]})]}),(n.error||n.gasUsed||n.priceImpact)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[n.error&&e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-red-600 dark:text-red-400",children:[e.jsx(Ie,{className:"w-3 h-3"}),e.jsx("span",{children:n.error})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 mt-1",children:[n.gasUsed&&e.jsxs("span",{children:["Gas: ",n.gasUsed.toFixed(6)," SOL"]}),n.priceImpact&&e.jsxs("span",{children:["Impact: ",n.priceImpact.toFixed(2),"%"]})]})]})]},n.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Transactions"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r?"Waiting for trading activity...":"Start trading to see live transactions"})]})}),w.length>0&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:w.filter(n=>n.status==="success").length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Successful"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:w.filter(n=>n.status==="failed").length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Failed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:w.filter(n=>n.type==="buy").length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Buys"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:w.filter(n=>n.type==="sell").length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sells"})]})]})})]})},Ma=({activeWallets:t,totalWallets:s,successRate:a,totalTransactions:r,currentLap:l,elapsedTime:o,timeLeft:m})=>{const u=g=>{const p=Math.floor(g/1e3),v=Math.floor(p/60),f=p%60;return`${v}:${f.toString().padStart(2,"0")}`},h=[{name:"Active Wallets",value:`${t}/${s}`,icon:ae,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",change:t>0?"+"+t:"0"},{name:"Success Rate",value:`${a.toFixed(1)}%`,icon:_,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900/20",change:a>90?"Excellent":a>70?"Good":"Fair"},{name:"Total Transactions",value:r.toString(),icon:Y,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-50 dark:bg-purple-900/20",change:r>0?`+${r}`:"0"},{name:"Current Lap",value:l?`#${l.lapNumber}`:"None",icon:se,color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-50 dark:bg-orange-900/20",change:l?"Active":"Idle"},{name:"Elapsed Time",value:u(o),icon:J,color:"text-indigo-600 dark:text-indigo-400",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",change:o>0?"Running":"Stopped"},{name:"Time Left",value:u(m),icon:Ft,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",change:m>0?"Remaining":"Complete"}];return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:h.map(g=>{const p=g.icon;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${g.bgColor}`,children:e.jsx(p,{className:`w-4 h-4 ${g.color}`})}),e.jsx("span",{className:`text-xs font-medium ${g.color}`,children:g.change})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:g.name}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:g.value})]})]},g.name)})})},Da=({isActive:t,onLapComplete:s})=>{const a=re(),{currentSession:r}=K(A=>A.session),{adminWallet:l,tradingWallets:o}=K(A=>A.wallet),{currentLap:m,laps:u,status:h}=K(A=>A.trading),[g,p]=x.useState([]),[v,f]=x.useState(!1),[w,$]=x.useState(""),[T,L]=x.useState(0),[P,S]=x.useState({solCollected:0,tokensCollected:0,walletsProcessed:0,totalWallets:0}),[n,c]=x.useState({walletsGenerated:0,solDistributed:0,tokensDistributed:0,phase:"idle"}),[y,b]=x.useState({isActive:!1,operation:"",retryCount:0,maxRetries:3});x.useEffect(()=>{if(m&&h==="running"){const I=setInterval(async()=>{Date.now()-m.startTime>=181e3&&await d()},1e3);return()=>clearInterval(I)}},[m,h]);const d=async()=>{if(!m||v)return;f(!0),$("Completing Trading Lap"),L(0);const A=m.startTime,I=m.lapNumber;try{$("Collecting SOL and Tokens from Trading Wallets"),L(10);const R=await j();if(L(40),!R.success)throw new Error("Collection phase failed");$("Regenerating Trading Wallets"),L(50);const W=await i();if(L(70),!W.success)throw new Error("Wallet regeneration failed");$("Distributing Funds to New Wallets"),L(80);const H=await k(R.solCollected,R.tokensCollected,W.newWallets);if(L(100),!H.success)throw new Error("Distribution phase failed");const z={lapNumber:I,startTime:A,endTime:Date.now(),totalSolCollected:R.solCollected,totalTokensCollected:R.tokensCollected,walletsGenerated:W.newWallets.length,distributionSuccess:H.success,status:"completed"};p(ne=>[...ne,z]),a(qt({solCollected:R.solCollected,tokensCollected:R.tokensCollected})),a(zt(I+1)),s(z),E.success(`Lap ${I} completed successfully!`)}catch(R){console.error("Lap completion failed:",R);const W={lapNumber:I,startTime:A,endTime:Date.now(),totalSolCollected:0,totalTokensCollected:0,walletsGenerated:0,distributionSuccess:!1,status:"failed",errorMessage:R instanceof Error?R.message:String(R)};p(H=>[...H,W]),a(sa(R instanceof Error?R.message:String(R))),s(W),E.error(`Lap ${I} failed: ${R instanceof Error?R.message:String(R)}`)}finally{f(!1),$(""),L(0),F()}},j=async()=>{S({solCollected:0,tokensCollected:0,walletsProcessed:0,totalWallets:o.length});try{let A=0,I=0;for(let R=0;R<o.length;R++){const W=o[R];try{const H=await C(N(W),3e4,`Collection from wallet ${W.number}`);A+=H.solCollected,I+=H.tokensCollected,S(z=>({...z,solCollected:A,tokensCollected:I,walletsProcessed:R+1})),await new Promise(z=>setTimeout(z,500))}catch(H){console.error(`Failed to collect from wallet ${W.number}:`,H)}}return{success:!0,solCollected:A,tokensCollected:I}}catch(A){return console.error("Collection phase failed:",A),{success:!1,solCollected:0,tokensCollected:0}}},N=async A=>{const I=Math.random()*.01+.001,R=Math.random()*100+10;return await new Promise(W=>setTimeout(W,1e3)),{solCollected:I,tokensCollected:R}},i=async()=>{c({walletsGenerated:0,solDistributed:0,tokensDistributed:0,phase:"generating"});try{const A=o.length,I=await C(U.generateTradingWallets(A),6e4,"Wallet generation");return c(R=>({...R,walletsGenerated:I.length,phase:"distributing-sol"})),{success:!0,newWallets:I}}catch(A){return console.error("Wallet regeneration failed:",A),{success:!1,newWallets:[]}}},k=async(A,I,R)=>{try{if(c(W=>({...W,phase:"distributing-sol"})),A>0){const W=await C(U.distributeSol(l,R,A),12e4,"SOL distribution");c(H=>({...H,solDistributed:A})),a(Ne(W))}if(I>0&&r){c(H=>({...H,phase:"distributing-tokens"}));const W=I/R.length;await C(U.distributeTokens(l,R,r.tokenAddress,W),12e4,"Token distribution"),c(H=>({...H,tokensDistributed:I}))}return c(W=>({...W,phase:"complete"})),{success:!0}}catch(W){return console.error("Distribution failed:",W),{success:!1}}},C=async(A,I,R)=>{b({isActive:!0,operation:R,retryCount:0,maxRetries:3});const W=new Promise((H,z)=>{setTimeout(()=>z(new Error(`${R} timed out after ${I}ms`)),I)});try{const H=await Promise.race([A,W]);return b(z=>({...z,isActive:!1})),H}catch(H){throw b(z=>({...z,isActive:!1})),H}},F=()=>{S({solCollected:0,tokensCollected:0,walletsProcessed:0,totalWallets:0}),c({walletsGenerated:0,solDistributed:0,tokensDistributed:0,phase:"idle"}),b({isActive:!1,operation:"",retryCount:0,maxRetries:3})},O=A=>new Date(A).toLocaleTimeString(),B=(A,I)=>{const R=I-A,W=Math.floor(R/6e4),H=Math.floor(R%6e4/1e3);return`${W}:${H.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"space-y-6",children:[v&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(G,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 animate-spin"}),e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:["Processing Lap ",m?.lapNumber]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:w}),e.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[T,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full transition-all duration-500",style:{width:`${T}%`}})})]}),P.totalWallets>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:P.solCollected.toFixed(6)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SOL Collected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:P.tokensCollected.toFixed(2)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tokens Collected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:[P.walletsProcessed,"/",P.totalWallets]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Wallets Processed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:n.walletsGenerated}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"New Wallets"})]})]}),y.isActive&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),e.jsxs("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:["Timeout protection active for: ",y.operation]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Lap Results History"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[g.length," laps completed"]})]}),g.length>0?e.jsx("div",{className:"space-y-4",children:g.slice(-10).reverse().map(A=>e.jsxs("div",{className:`p-4 border rounded-lg ${A.status==="completed"?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":A.status==="failed"?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":"border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-900/20"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[A.status==="completed"?e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):A.status==="failed"?e.jsx(Ie,{className:"w-5 h-5 text-red-600 dark:text-red-400"}):e.jsx(J,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["Lap #",A.lapNumber]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[O(A.startTime)," - ",O(A.endTime)]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Duration: ",B(A.startTime,A.endTime)]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(X,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"SOL"})]}),e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:A.totalSolCollected.toFixed(6)})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tokens"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:A.totalTokensCollected.toFixed(2)})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(ae,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Wallets"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:A.walletsGenerated})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(Y,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"})]}),e.jsx("div",{className:`text-sm font-medium capitalize ${A.status==="completed"?"text-green-600 dark:text-green-400":A.status==="failed"?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"}`,children:A.status})]})]}),A.errorMessage&&e.jsx("div",{className:"mt-3 p-2 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded",children:e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Error: ",A.errorMessage]})})]},A.lapNumber))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(se,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Lap Results Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Lap results will appear here as trading progresses"})]})]}),g.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Session Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:g.reduce((A,I)=>A+I.totalSolCollected,0).toFixed(6)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total SOL Collected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g.reduce((A,I)=>A+I.totalTokensCollected,0).toFixed(2)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Tokens Collected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:g.filter(A=>A.status==="completed").length}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Successful Laps"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[g.length>0?(g.filter(A=>A.status==="completed").length/g.length*100).toFixed(1):"0","%"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Success Rate"})]})]})]})]})},Pa=({wallets:t,tokenSymbol:s,isActive:a,onCollectionUpdate:r})=>{const[l,o]=x.useState([]),[m,u]=x.useState(0),[h,g]=x.useState(!1);x.useEffect(()=>{a&&t.length>0&&p()},[a,t]);const p=()=>{const S=t.map(n=>({walletNumber:n.number,publicKey:n.publicKey,solBalance:n.solBalance||0,tokenBalance:n.tokenBalance||0,solCollected:0,tokensCollected:0,status:"pending"}));o(S),g(!0),v(S)},v=async S=>{const n=[...S];for(let c=0;c<n.length;c++){const y=n[c];y.status="collecting",o([...n]);try{await new Promise(N=>setTimeout(N,1e3+Math.random()*2e3));const d=y.solBalance*(.8+Math.random()*.2),j=y.tokenBalance*(.9+Math.random()*.1);y.solCollected=d,y.tokensCollected=j,y.status=Math.random()>.05?"completed":"failed",y.status==="failed"&&(y.error="Transaction failed - insufficient gas")}catch(d){y.status="failed",y.error=d instanceof Error?d.message:String(d)}const b=(c+1)/n.length*100;u(b),o([...n]),await new Promise(d=>setTimeout(d,300))}g(!1),r(n)},f=S=>{switch(S){case"pending":return e.jsx(J,{className:"w-4 h-4 text-gray-400"});case"collecting":return e.jsx(G,{className:"w-4 h-4 text-blue-500 animate-spin"});case"completed":return e.jsx(_,{className:"w-4 h-4 text-green-500"});case"failed":return e.jsx(V,{className:"w-4 h-4 text-red-500"});default:return e.jsx(J,{className:"w-4 h-4 text-gray-400"})}},w=S=>{switch(S){case"pending":return"text-gray-500";case"collecting":return"text-blue-500";case"completed":return"text-green-500";case"failed":return"text-red-500";default:return"text-gray-500"}},$=l.reduce((S,n)=>S+n.solCollected,0),T=l.reduce((S,n)=>S+n.tokensCollected,0),L=l.filter(S=>S.status==="completed").length,P=l.filter(S=>S.status==="failed").length;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Collection Monitor"})]}),h&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600 dark:text-blue-400",children:[e.jsx(Q,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Collecting..."})]})]}),l.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Collection Progress"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[m.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 dark:bg-green-400 h-2 rounded-full transition-all duration-500",style:{width:`${m}%`}})})]}),l.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(X,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"SOL"})]}),e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:$.toFixed(6)})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:s})]}),e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:T.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(_,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Success"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:L})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(V,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Failed"})]}),e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:P})]})]}),l.length>0?e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:l.map(S=>e.jsxs("div",{className:`p-3 border rounded-lg transition-colors ${S.status==="completed"?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":S.status==="failed"?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":S.status==="collecting"?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[f(S.status),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:["Wallet #",S.walletNumber]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:[S.publicKey.slice(0,8),"...",S.publicKey.slice(-8)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-green-600 dark:text-green-400",children:S.solCollected.toFixed(4)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SOL"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-blue-600 dark:text-blue-400",children:S.tokensCollected.toFixed(2)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s})]})]}),e.jsx("div",{className:`text-xs font-medium capitalize ${w(S.status)}`,children:S.status})]})]}),S.error&&e.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:S.error})]},S.publicKey))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ge,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Collection Activity"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Collection monitoring will start when a trading lap completes"})]})]})},Oa=({isActive:t,walletCount:s,solAmount:a,tokenAmount:r,tokenSymbol:l,onRegenerationComplete:o})=>{const[m,u]=x.useState([{name:"Generate New Wallets",status:"pending",progress:0},{name:"Distribute SOL",status:"pending",progress:0},{name:"Distribute Tokens",status:"pending",progress:0},{name:"Validate Setup",status:"pending",progress:0}]),[h,g]=x.useState(0),[p,v]=x.useState(!1),[f,w]=x.useState([]),[$,T]=x.useState({solDistributed:0,tokensDistributed:0,successfulWallets:0});x.useEffect(()=>{t&&!p&&L()},[t]);const L=async()=>{v(!0),g(0);try{await P(0,y),await P(1,b),r>0?await P(2,d):S(2,"No tokens to distribute"),await P(3,j),o({success:!0,wallets:f,solDistributed:$.solDistributed,tokensDistributed:$.tokensDistributed})}catch(C){console.error("Regeneration failed:",C),n(h,"failed",0,C instanceof Error?C.message:String(C)),o({success:!1,error:C instanceof Error?C.message:String(C)})}finally{v(!1)}},P=async(C,F)=>{g(C),n(C,"active",0);try{await F(),n(C,"completed",100)}catch(O){throw n(C,"failed",0,O instanceof Error?O.message:String(O)),O}},S=(C,F)=>{n(C,"completed",100,F)},n=(C,F,O,B)=>{u(A=>A.map((I,R)=>R===C?{...I,status:F,progress:O,details:B,error:F==="failed"?B:void 0}:I))},c=(C,F,O)=>{u(B=>B.map((A,I)=>I===C?{...A,progress:F,details:O}:A))},y=async()=>{c(0,10,"Initializing wallet generation...");const C=[];for(let F=0;F<s;F++){await new Promise(A=>setTimeout(A,100));const O={number:F+1,publicKey:`Generated${F+1}PublicKey${Math.random().toString(36).substr(2,9)}`,privateKey:`generated_private_key_${F+1}`,solBalance:0,tokenBalance:0,isActive:!1,generationTimestamp:new Date().toISOString()};C.push(O);const B=(F+1)/s*100;c(0,B,`Generated ${F+1}/${s} wallets`)}w(C),c(0,100,`Successfully generated ${s} wallets`)},b=async()=>{if(a<=0){c(1,100,"No SOL to distribute");return}c(1,10,"Preparing SOL distribution...");const C=a/s;let F=0,O=0;for(let B=0;B<f.length;B++){await new Promise(R=>setTimeout(R,200)),Math.random()>.05&&(F++,O+=C,f[B].solBalance=C,f[B].isActive=!0);const I=(B+1)/f.length*100;c(1,I,`Distributed SOL to ${F}/${B+1} wallets`)}T(B=>({...B,solDistributed:O,successfulWallets:F})),c(1,100,`Distributed ${O.toFixed(6)} SOL to ${F} wallets`)},d=async()=>{if(r<=0){c(2,100,"No tokens to distribute");return}c(2,10,"Preparing token distribution...");const C=r/s;let F=0,O=0;for(let B=0;B<f.length;B++){await new Promise(I=>setTimeout(I,150)),f[B].isActive&&Math.random()>.03&&(F++,O+=C,f[B].tokenBalance=C);const A=(B+1)/f.length*100;c(2,A,`Distributed tokens to ${F}/${B+1} wallets`)}T(B=>({...B,tokensDistributed:O})),c(2,100,`Distributed ${O.toFixed(2)} ${l} to ${F} wallets`)},j=async()=>{c(3,10,"Validating wallet setup...");let C=0;for(let F=0;F<f.length;F++){await new Promise(A=>setTimeout(A,50));const O=f[F];O.isActive&&O.solBalance>0&&C++;const B=(F+1)/f.length*100;c(3,B,`Validated ${C}/${F+1} wallets`)}if(C===0)throw new Error("No valid wallets found after regeneration");c(3,100,`Setup validated: ${C} wallets ready for trading`)},N=C=>{switch(C.status){case"pending":return e.jsx(J,{className:"w-5 h-5 text-gray-400"});case"active":return e.jsx(G,{className:"w-5 h-5 text-blue-500 animate-spin"});case"completed":return e.jsx(_,{className:"w-5 h-5 text-green-500"});case"failed":return e.jsx(V,{className:"w-5 h-5 text-red-500"});default:return e.jsx(J,{className:"w-5 h-5 text-gray-400"})}},i=C=>{switch(C.status){case"pending":return"text-gray-500";case"active":return"text-blue-500";case"completed":return"text-green-500";case"failed":return"text-red-500";default:return"text-gray-500"}},k=m.reduce((C,F)=>C+F.progress,0)/m.length;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Wallet Regeneration"})]}),p&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600 dark:text-blue-400",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsxs("span",{children:[k.toFixed(1),"% Complete"]})]})]}),p&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 dark:bg-purple-400 h-2 rounded-full transition-all duration-500",style:{width:`${k}%`}})})]}),e.jsx("div",{className:"space-y-4",children:m.map((C,F)=>e.jsxs("div",{className:`p-4 border rounded-lg transition-colors ${C.status==="completed"?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":C.status==="failed"?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":C.status==="active"?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[N(C),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:C.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${i(C)}`,children:[C.progress.toFixed(0),"%"]}),F<m.length-1&&C.status==="completed"&&e.jsx(Ke,{className:"w-4 h-4 text-gray-400"})]})]}),C.status==="active"&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mb-2",children:e.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-1 rounded-full transition-all duration-300",style:{width:`${C.progress}%`}})}),C.details&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:C.details}),C.error&&e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:["Error: ",C.error]})]},C.name))}),!p&&f.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Regeneration Results"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(ae,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Wallets"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:f.length})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(X,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"SOL"})]}),e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:$.solDistributed.toFixed(6)})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:l})]}),e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:$.tokensDistributed.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(_,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Active"})]}),e.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:$.successfulWallets})]})]})]})]})},Ia=({wallets:t,tokenSymbol:s,adminWallet:a,onBalanceUpdate:r,autoRefresh:l=!0,refreshInterval:o=5e3})=>{const[m,u]=x.useState([]),[h,g]=x.useState(!1),[p,v]=x.useState(!1),[f,w]=x.useState("number"),[$,T]=x.useState("all");x.useEffect(()=>{if(!l)return;const i=setInterval(()=>{L()},o);return()=>clearInterval(i)},[t,l,o]),x.useEffect(()=>{if(t.length>0){const i=t.map(k=>({walletNumber:k.number,publicKey:k.publicKey,solBalance:k.solBalance||Math.random()*.1+.001,tokenBalance:k.tokenBalance||Math.random()*1e3+100,previousSolBalance:k.solBalance||0,previousTokenBalance:k.tokenBalance||0,lastUpdated:Date.now(),isActive:k.isActive||Math.random()>.3,change24h:{sol:(Math.random()-.5)*.02,token:(Math.random()-.5)*200}}));u(i)}},[t]);const L=async()=>{g(!0),await new Promise(i=>setTimeout(i,1e3)),u(i=>i.map(k=>{const C=(Math.random()-.5)*.01,F=(Math.random()-.5)*50;return{...k,previousSolBalance:k.solBalance,previousTokenBalance:k.tokenBalance,solBalance:Math.max(0,k.solBalance+C),tokenBalance:Math.max(0,k.tokenBalance+F),lastUpdated:Date.now(),change24h:{sol:k.change24h.sol+C*.1,token:k.change24h.token+F*.1}}})),g(!1)};x.useEffect(()=>{r&&r(m)},[m,r]);const P=m.filter(i=>$==="all"?!0:$==="active"?i.isActive:$==="inactive"?!i.isActive:!0).sort((i,k)=>{switch(f){case"number":return i.walletNumber-k.walletNumber;case"sol":return k.solBalance-i.solBalance;case"token":return k.tokenBalance-i.tokenBalance;case"change":return k.change24h.sol-i.change24h.sol;default:return i.walletNumber-k.walletNumber}}),S=m.reduce((i,k)=>i+k.solBalance,0),n=m.reduce((i,k)=>i+k.tokenBalance,0),c=m.filter(i=>i.isActive).length,y=m.reduce((i,k)=>i+k.change24h.sol,0),b=(i,k=6)=>i.toFixed(k),d=(i,k=!1)=>{const C=i>=0?"+":"",F=k?"%":"";return`${C}${i.toFixed(k?2:6)}${F}`},j=i=>i>0?"text-green-500":i<0?"text-red-500":"text-gray-500",N=i=>new Date(i).toLocaleTimeString();return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Balance Tracker"}),l&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-blue-600 dark:text-blue-400",children:[e.jsx(Q,{className:`w-3 h-3 ${h?"animate-spin":""}`}),e.jsx("span",{children:"Auto-refresh"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>v(!p),className:"flex items-center px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:[p?e.jsx(Oe,{className:"w-4 h-4 mr-1"}):e.jsx(He,{className:"w-4 h-4 mr-1"}),p?"Hide":"Show"," Details"]}),e.jsxs("button",{onClick:L,disabled:h,className:"flex items-center px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-1 ${h?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(X,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total SOL"})]}),e.jsx("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:b(S)}),e.jsxs("div",{className:`text-xs ${j(y)}`,children:[d(y)," (24h)"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:["Total ",s]})]}),e.jsx("div",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:b(n,2)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Across ",m.length," wallets"]})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Y,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Active Wallets"})]}),e.jsxs("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:[c,"/",m.length]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(c/m.length*100).toFixed(1),"% active"]})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(se,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Avg Balance"})]}),e.jsx("div",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:b(S/m.length)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SOL per wallet"})]})]}),a&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(me,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-900 dark:text-purple-100",children:"Admin Wallet"}),e.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300 font-mono",children:[a.publicKey.slice(0,8),"...",a.publicKey.slice(-8)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:[b(a.solBalance||0)," SOL"]}),e.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:[b(a.tokenBalance||0,2)," ",s]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:f,onChange:i=>w(i.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"number",children:"Wallet Number"}),e.jsx("option",{value:"sol",children:"SOL Balance"}),e.jsx("option",{value:"token",children:"Token Balance"}),e.jsx("option",{value:"change",children:"24h Change"})]}),e.jsxs("select",{value:$,onChange:i=>T(i.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Wallets"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",m.length>0?N(Math.max(...m.map(i=>i.lastUpdated))):"Never"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:P.length>0?P.map(i=>e.jsx("div",{className:`p-4 border rounded-lg transition-all duration-200 hover:shadow-md ${i.isActive?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${i.isActive?"bg-green-500":"bg-gray-400"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:["Wallet #",i.walletNumber]}),p&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:[i.publicKey.slice(0,8),"...",i.publicKey.slice(-8)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[b(i.solBalance)," SOL"]}),p&&e.jsx("div",{className:`text-xs ${j(i.change24h.sol)}`,children:d(i.change24h.sol)})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[b(i.tokenBalance,2)," ",s]}),p&&e.jsx("div",{className:`text-xs ${j(i.change24h.token)}`,children:d(i.change24h.token,!1)})]})]}),p&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Updated: ",N(i.lastUpdated)]})]})]})},i.walletNumber)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ce,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Wallet Balances"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Wallet balances will appear here once trading begins"})]})})]})},Ba=({tokenSymbol:t,onCalculationUpdate:s,isActive:a=!1})=>{const[r,l]=x.useState([]),[o,m]=x.useState({tokenPrice:.001234,solPrice:180.45,liquidity:125e4,volume24h:85e4,lastUpdated:Date.now()}),[u,h]=x.useState({amount:.01,type:"buy",slippage:5}),[g,p]=x.useState(!1);x.useEffect(()=>{if(!a)return;const n=setInterval(()=>{if(Math.random()>.7){const c=v();l(y=>[c,...y.slice(0,49)])}},2e3);return()=>clearInterval(n)},[a,o]),x.useEffect(()=>{const n=setInterval(()=>{m(c=>({...c,tokenPrice:c.tokenPrice*(1+(Math.random()-.5)*.02),solPrice:c.solPrice*(1+(Math.random()-.5)*.01),liquidity:c.liquidity*(1+(Math.random()-.5)*.05),volume24h:c.volume24h*(1+(Math.random()-.5)*.1),lastUpdated:Date.now()}))},1e4);return()=>clearInterval(n)},[]);const v=()=>{const n=Math.random()>.5?"buy":"sell",c=Math.random()*.1+.001,y=.8+Math.random()*.4,b=c*y,d=.5+Math.random()*4.5,j=Math.random()*2;let N,i;n==="buy"?(i=o.tokenPrice*o.solPrice,N=b/o.tokenPrice*(1-d/100)):(i=1/(o.tokenPrice*o.solPrice),N=b*o.tokenPrice*(1-d/100));const k=N*(1-d/100);return{id:Date.now().toString()+Math.random().toString(36).substr(2,9),walletNumber:Math.floor(Math.random()*10)+1,type:n,inputAmount:b,outputAmount:N,slippage:d,priceImpact:j,minimumReceived:k,exchangeRate:i,timestamp:Date.now(),randomizationFactor:y}},f=()=>{const n={...v(),inputAmount:u.amount,type:u.type,slippage:u.slippage,walletNumber:0};n.type==="buy"?n.outputAmount=n.inputAmount/o.tokenPrice*(1-n.slippage/100):n.outputAmount=n.inputAmount*o.tokenPrice*(1-n.slippage/100),n.minimumReceived=n.outputAmount*(1-n.slippage/100),l(c=>[n,...c])};x.useEffect(()=>{s&&s(r)},[r,s]);const w=(n,c=6)=>n.toFixed(c),$=n=>n.toFixed(6),T=n=>new Date(n).toLocaleTimeString(),L=n=>n>1.1?"text-green-500":n<.9?"text-red-500":"text-gray-500",P=r.length>0?r.reduce((n,c)=>n+c.slippage,0)/r.length:0,S=r.length>0?r.reduce((n,c)=>n+c.priceImpact,0)/r.length:0;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Swap Calculator & Analytics"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:()=>p(!g),className:"flex items-center px-3 py-1 text-sm bg-purple-100 dark:bg-purple-900/20 hover:bg-purple-200 dark:hover:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg transition-colors",children:[e.jsx(ze,{className:"w-4 h-4 mr-1"}),g?"Hide":"Show"," Calculator"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsxs("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:[t," Price"]})]}),e.jsxs("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:["$",$(o.tokenPrice)]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated: ",T(o.lastUpdated)]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(X,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"SOL Price"})]}),e.jsxs("div",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:["$",$(o.solPrice)]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Live price"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Liquidity"})]}),e.jsxs("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:["$",(o.liquidity/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pool depth"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(se,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"24h Volume"})]}),e.jsxs("div",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:["$",(o.volume24h/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Trading volume"})]})]}),g&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Manual Swap Calculator"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Swap Type"}),e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>h(n=>({...n,type:"buy"})),className:`flex-1 flex items-center justify-center px-4 py-2 text-sm font-medium rounded-l-lg ${u.type==="buy"?"bg-green-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Buy"]}),e.jsxs("button",{onClick:()=>h(n=>({...n,type:"sell"})),className:`flex-1 flex items-center justify-center px-4 py-2 text-sm font-medium rounded-r-lg ${u.type==="sell"?"bg-red-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Sell"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:u.type==="buy"?"SOL Amount":`${t} Amount`}),e.jsx("input",{type:"number",step:"0.001",min:"0.001",value:u.amount,onChange:n=>h(c=>({...c,amount:parseFloat(n.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slippage Tolerance (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0.1",max:"100",value:u.slippage,onChange:n=>h(c=>({...c,slippage:parseFloat(n.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),e.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Calculate Swap"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.length>0?r.map(n=>e.jsxs("div",{className:`p-4 border rounded-lg transition-all duration-200 hover:shadow-md ${n.type==="buy"?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[n.type==="buy"?e.jsx(ee,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(We,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[n.type==="buy"?"Buy":"Sell"," ",n.walletNumber===0?"(Manual)":`- Wallet #${n.walletNumber}`]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:T(n.timestamp)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ks,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:`text-xs font-medium ${L(n.randomizationFactor)}`,children:[(n.randomizationFactor*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.type==="buy"?"Input (SOL)":`Input (${t})`}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w(n.inputAmount,n.type==="buy"?6:2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.type==="buy"?`Output (${t})`:"Output (SOL)"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w(n.outputAmount,n.type==="buy"?2:6)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1"}),"Slippage: ",n.slippage.toFixed(2),"%"]})}),e.jsx("div",{children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"Impact: ",n.priceImpact.toFixed(2),"%"]})}),e.jsx("div",{children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ye,{className:"w-3 h-3 mr-1"}),"Min: ",w(n.minimumReceived,n.type==="buy"?2:6)]})})]})]},n.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ze,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Swap Calculations"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Swap calculations will appear here when trading begins"})]})}),r.length>0&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Swap Analytics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:r.filter(n=>n.type==="buy").length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Buy Calculations"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:r.filter(n=>n.type==="sell").length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sell Calculations"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[P.toFixed(2),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Avg Slippage"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[S.toFixed(2),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Avg Price Impact"})]})]})]})]})},Wa=({tokenAddress:t,tokenSymbol:s,onPoolUpdate:a,autoRefresh:r=!0,refreshInterval:l=3e4})=>{const[o,m]=x.useState(null),[u,h]=x.useState(!1),[g,p]=x.useState(null),[v,f]=x.useState(0),[w,$]=x.useState("expired");x.useEffect(()=>{t&&T()},[t]),x.useEffect(()=>{if(!r||!t)return;const b=setInterval(()=>{T()},l);return()=>clearInterval(b)},[r,l,t]),x.useEffect(()=>{if(!o)return;const b=()=>{const N=Date.now()-o.lastUpdated;N<6e4?$("fresh"):N<3e5?$("stale"):$("expired")};b();const d=setInterval(b,1e4);return()=>clearInterval(d)},[o]);const T=async()=>{if(!u){h(!0),p(null);try{await new Promise(d=>setTimeout(d,1e3));const b={id:`pool_${Math.random().toString(36).substr(2,9)}`,name:`${s}/SOL`,address:`pool_${Math.random().toString(36).substr(2,9)}`,tokenAddress:t,tokenSymbol:s,tokenDecimals:9,solPrice:180+Math.random()*10,tokenPrice:.001+Math.random()*5e-4,liquidity:1e6+Math.random()*5e5,volume24h:5e5+Math.random()*3e5,fees24h:1500+Math.random()*1e3,priceChange:{h1:(Math.random()-.5)*2,h24:(Math.random()-.5)*10},transactions:{h24:{buys:1200+Math.floor(Math.random()*300),sells:800+Math.floor(Math.random()*200)}},lastUpdated:Date.now(),cacheExpiry:Date.now()+3e5};m(b),f(Date.now()),a&&a(b)}catch(b){console.error("Failed to fetch pool data:",b),p("Failed to fetch pool data. Please try again.")}finally{h(!1)}}},L=b=>b>=1e6?`$${(b/1e6).toFixed(2)}M`:b>=1e3?`$${(b/1e3).toFixed(2)}K`:`$${b.toFixed(2)}`,P=b=>b<1e-4?`$${b.toExponential(4)}`:b<.01?`$${b.toFixed(6)}`:`$${b.toFixed(4)}`,S=b=>`${b>=0?"+":""}${b.toFixed(2)}%`,n=b=>b>0?"text-green-600 dark:text-green-400":b<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400",c=b=>new Date(b).toLocaleTimeString(),y=()=>{switch(w){case"fresh":return"text-green-600 dark:text-green-400";case"stale":return"text-yellow-600 dark:text-yellow-400";case"expired":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pool Information"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[o&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(J,{className:`w-4 h-4 ${y()}`}),e.jsx("span",{className:`${y()}`,children:w==="fresh"?"Fresh":w==="stale"?"Stale":"Expired"})]}),e.jsxs("button",{onClick:T,disabled:u,className:"flex items-center px-3 py-1 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-1 ${u?"animate-spin":""}`}),u?"Updating...":"Refresh"]})]})]}),g&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"text-red-700 dark:text-red-300",children:g})]})}),o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[o.name," Pool"]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",c(o.lastUpdated)]}),e.jsxs("a",{href:`https://solscan.io/token/${o.tokenAddress}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:[e.jsx(pt,{className:"w-3 h-3"}),e.jsx("span",{children:"View on Solscan"})]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:`flex items-center space-x-1 ${n(o.priceChange.h24)}`,children:[o.priceChange.h24>=0?e.jsx(Mt,{className:"w-4 h-4"}):e.jsx(Dt,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:[S(o.priceChange.h24)," (24h)"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),e.jsxs("span",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:[s," Price"]})]}),e.jsx("div",{className:"text-xl font-bold text-indigo-900 dark:text-indigo-100",children:P(o.tokenPrice)}),e.jsxs("div",{className:`text-xs ${n(o.priceChange.h1)}`,children:[S(o.priceChange.h1)," (1h)"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(X,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"SOL Price"})]}),e.jsxs("div",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:["$",o.solPrice.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Market price"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Liquidity"})]}),e.jsx("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:L(o.liquidity)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total pool value"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Y,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"24h Volume"})]}),e.jsx("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:L(o.volume24h)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Trading volume"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"24h Transactions"}),e.jsx(se,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:o.transactions.h24.buys+o.transactions.h24.sells}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total swaps"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-green-600 dark:text-green-400",children:[e.jsx(ee,{className:"w-3 h-3"}),e.jsx("span",{className:"text-sm font-medium",children:o.transactions.h24.buys})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-red-600 dark:text-red-400",children:[e.jsx(We,{className:"w-3 h-3"}),e.jsx("span",{className:"text-sm font-medium",children:o.transactions.h24.sells})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"24h Fees"}),e.jsx(X,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:L(o.fees24h)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated from ",L(o.volume24h)," volume"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pool Cache"}),e.jsx(J,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:w==="fresh"?"Fresh":w==="stale"?"Stale":"Expired"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Expires: ",c(o.cacheExpiry)]})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-indigo-900 dark:text-indigo-100",children:"Current Exchange Rate"}),e.jsx(we,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:"1 SOL ="}),e.jsxs("div",{className:"text-xl font-bold text-indigo-900 dark:text-indigo-100",children:[(1/o.tokenPrice).toFixed(0)," ",s]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:["1 ",s," ="]}),e.jsxs("div",{className:"text-xl font-bold text-indigo-900 dark:text-indigo-100",children:[o.tokenPrice.toFixed(6)," SOL"]})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Pool Information"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:u?"Loading pool information...":"Click refresh to load pool information"}),u&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})]})]})},Ua=()=>{re();const{currentSession:t}=K(f=>f.session),{adminWallet:s,tradingWallets:a}=K(f=>f.wallet),[r,l]=x.useState(!1),[o,m]=x.useState("idle"),[u,h]=x.useState(0),[g,p]=x.useState({solCollected:0,tokensCollected:0,accountsClosed:0,errors:[]}),v=async()=>{if(!t||!s||a.length===0){E.error("Session, admin wallet, and trading wallets are required");return}if(confirm("This will close all token accounts and send balances to the admin wallet. Continue?")){l(!0),m("running"),h(0),p({solCollected:0,tokensCollected:0,accountsClosed:0,errors:[]});try{const f=setInterval(()=>{h(w=>w>=95?(clearInterval(f),w):w+5)},1e3);await U.closeTokenAccountsAndSendBalance(t),clearInterval(f),h(100),m("completed"),p({solCollected:a.reduce((w,$)=>w+$.solBalance,0),tokensCollected:a.reduce((w,$)=>w+$.tokenBalance,0),accountsClosed:a.length,errors:[]}),E.success("Cleanup operations completed successfully")}catch(f){m("failed"),p(w=>({...w,errors:[...w.errors,f instanceof Error?f.message:String(f)]})),E.error(`Cleanup failed: ${f instanceof Error?f.message:String(f)}`)}finally{l(!1)}}};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cleanup Operations"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Token Account Cleanup"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"This operation will close all token accounts associated with your trading wallets and send any remaining SOL and token balances back to your admin wallet. This helps recover rent and consolidate funds after trading."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${s?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s?e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:`font-medium ${s?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"Admin Wallet"})]}),e.jsx("p",{className:`text-sm mt-1 ${s?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:s?`Ready (${s.publicKey.slice(0,8)}...)`:"Admin wallet required"})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${a.length>0?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a.length>0?e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:`font-medium ${a.length>0?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"Trading Wallets"})]}),e.jsx("p",{className:`text-sm mt-1 ${a.length>0?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:a.length>0?`${a.length} wallets available`:"Trading wallets required"})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[t?e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:`font-medium ${t?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"Token Information"})]}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:t?`${t.tokenName} ready`:"Token information required"})]})]}),o==="running"&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(G,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"}),e.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Cleanup in progress..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-400",children:"Progress"}),e.jsxs("span",{className:"text-blue-700 dark:text-blue-400",children:[u,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`}})})]})]}),o==="completed"&&e.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-300",children:"Cleanup completed successfully"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"SOL Collected:"}),e.jsxs("div",{className:"font-semibold text-green-900 dark:text-green-100",children:[g.solCollected.toFixed(6)," SOL"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Tokens Collected:"}),e.jsxs("div",{className:"font-semibold text-green-900 dark:text-green-100",children:[g.tokensCollected.toFixed(2)," ",t?.tokenName||"Tokens"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Accounts Closed:"}),e.jsx("div",{className:"font-semibold text-green-900 dark:text-green-100",children:g.accountsClosed})]})]})]}),o==="failed"&&e.jsxs("div",{className:"mt-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"font-medium text-red-800 dark:text-red-300",children:"Cleanup failed"})]}),e.jsx("div",{className:"space-y-2",children:g.errors.map((f,w)=>e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:f},w))})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:v,disabled:!s||a.length===0||!t||r,className:"w-full flex items-center justify-center px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r?e.jsx(G,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(Se,{className:"w-5 h-5 mr-2"}),r?"Processing...":"Close Token Accounts & Send Balance to Admin"]})}),e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(V,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mt-1",children:"This operation is irreversible. All token accounts will be closed and balances will be sent to the admin wallet. Make sure you have completed all trading operations before proceeding."})]})]})})]})]})},Ka=()=>{const t=re(),{currentSession:s}=K(D=>D.session),{adminWallet:a,tradingWallets:r}=K(D=>D.wallet),{status:l,strategy:o,currentLap:m,laps:u,globalTradingFlag:h,elapsedTime:g,timeLeft:p,duration:v}=K(D=>D.trading),[f,w]=x.useState("INCREASE_MAKERS_VOLUME"),[$,T]=x.useState(!1),[L,P]=x.useState(new Map),[S,n]=x.useState([]),[c,y]=x.useState("control"),[b,d]=x.useState(!1),[j,N]=x.useState(!1),[i,k]=x.useState([]),[C,F]=x.useState([]),[O,B]=x.useState([]),[A,I]=x.useState(null);x.useEffect(()=>{let D;return l==="running"&&(D=setInterval(()=>{if(m){const Z=Date.now()-m.startTime;t(aa(Z))}R()},1e3)),()=>{D&&clearInterval(D)}},[l,m,t]);const R=async()=>{if(r.length)try{const D=await U.getWalletBalances(r),Z=new Map;D.forEach(le=>{Z.set(le.publicKey,{...le,isTrading:h&&le.isActive,lastUpdate:Date.now()})}),P(Z)}catch(D){console.error("Failed to refresh wallet statuses:",D)}},W=async()=>{if(!s||!a||r.length===0){E.error("Complete session setup required before starting trading");return}T(!0);try{await U.startTrading(f,s),t(Qs({strategy:f,duration:f==="INCREASE_MAKERS_VOLUME"?181e3:12e8})),t(zt(1)),E.success(`Trading started with ${f.replace("_"," ").toLowerCase()}`)}catch(D){E.error(`Failed to start trading: ${D instanceof Error?D.message:String(D)}`)}finally{T(!1)}},H=async()=>{T(!0);try{await U.pauseTrading(),t(Zs()),E.success("Trading paused")}catch(D){E.error(`Failed to pause trading: ${D instanceof Error?D.message:String(D)}`)}finally{T(!1)}},z=async()=>{T(!0);try{await U.resumeTrading(),t(ea()),E.success("Trading resumed")}catch(D){E.error(`Failed to resume trading: ${D instanceof Error?D.message:String(D)}`)}finally{T(!1)}},ne=async()=>{T(!0);try{await U.stopTrading(),t(ta()),m&&t(qt({solCollected:0,tokensCollected:0})),E.success("Trading stopped")}catch(D){E.error(`Failed to stop trading: ${D instanceof Error?D.message:String(D)}`)}finally{T(!1)}},be=D=>{k(Z=>[...Z,D]),D.status==="completed"&&(d(!0),y("collection"))},ue=D=>{if(F(D),D.every(le=>le.status==="completed"||le.status==="failed")){d(!1);const le=D.reduce((rt,nt)=>rt+nt.solCollected,0),as=D.reduce((rt,nt)=>rt+nt.tokensCollected,0);(le>0||as>0)&&(N(!0),y("regeneration"))}},at=D=>{N(!1),D.success?(E.success("Wallet regeneration completed successfully!"),y("control")):E.error(`Regeneration failed: ${D.error}`)},Ge=D=>{n(D)},M=D=>{B(D)},q=D=>{I(D)},fe=Array.from(L.values()).filter(D=>D.isTrading).length,he=S.length,es=S.filter(D=>D.status==="success").length,ts=he>0?es/he*100:0,ss=[{id:"control",name:"Trading Control",icon:ht},{id:"laps",name:"Lap Management",icon:se},{id:"collection",name:"Collection Monitor",icon:ge},{id:"regeneration",name:"Wallet Regeneration",icon:bt},{id:"transactions",name:"Transactions",icon:Y},{id:"analytics",name:"Analytics",icon:Ce},{id:"cleanup",name:"Cleanup",icon:Se}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Advanced Trading Control Center"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Dynamic multi-lap trading with real-time monitoring and analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:R,className:"flex items-center px-3 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg ${l==="running"?"bg-green-100 dark:bg-green-900/20":l==="paused"?"bg-yellow-100 dark:bg-yellow-900/20":"bg-gray-100 dark:bg-gray-700"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l==="running"?"bg-green-500 animate-pulse":l==="paused"?"bg-yellow-500":"bg-gray-400"}`}),e.jsx("span",{className:`font-medium capitalize ${l==="running"?"text-green-700 dark:text-green-300":l==="paused"?"text-yellow-700 dark:text-yellow-300":"text-gray-700 dark:text-gray-300"}`,children:l})]})]})]}),!s&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(V,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"No Active Session"}),e.jsx("p",{className:"text-yellow-700 dark:text-yellow-400 mt-1",children:"Please create or load a trading session before starting trading operations."})]})]})}),e.jsx(Ma,{activeWallets:fe,totalWallets:r.length,successRate:ts,totalTransactions:he,currentLap:m,elapsedTime:g,timeLeft:p}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:e.jsx("nav",{className:"flex space-x-6 px-6",children:ss.map(D=>{const Z=D.icon,le=c===D.id;return e.jsxs("button",{onClick:()=>y(D.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${le?"border-solana-500 text-solana-600 dark:text-solana-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:D.name}),D.id==="collection"&&b&&e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),D.id==="regeneration"&&j&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),D.id==="transactions"&&l==="running"&&e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"})]},D.id)})})}),e.jsxs("div",{className:"p-6",children:[c==="control"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ea,{status:l,strategy:o,selectedStrategy:f,onStrategyChange:w,onStart:W,onPause:H,onResume:z,onStop:ne,isLoading:$,canStart:!!(s&&a&&r.length>0)}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ra,{currentLap:m,laps:u,elapsedTime:g,timeLeft:p,duration:v,status:l}),e.jsx($t,{transactions:S,onTransactionUpdate:Ge,tokenSymbol:s?.tokenName,isActive:l==="running"})]}),e.jsx(Fa,{wallets:r,walletStatuses:L,globalTradingFlag:h,tokenSymbol:s?.tokenName})]}),c==="laps"&&e.jsx(Da,{isActive:l==="running",onLapComplete:be}),c==="collection"&&e.jsx(Pa,{wallets:r,tokenSymbol:s?.tokenName||"Tokens",isActive:b,onCollectionUpdate:ue}),c==="regeneration"&&e.jsx(Oa,{isActive:j,walletCount:r.length,solAmount:C.reduce((D,Z)=>D+Z.solCollected,0),tokenAmount:C.reduce((D,Z)=>D+Z.tokensCollected,0),tokenSymbol:s?.tokenName||"Tokens",onRegenerationComplete:at}),c==="transactions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx($t,{transactions:S,onTransactionUpdate:Ge,tokenSymbol:s?.tokenName,isActive:l==="running"}),e.jsx(Ia,{wallets:r,tokenSymbol:s?.tokenName||"Tokens",adminWallet:a,autoRefresh:l==="running"})]}),c==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Wa,{tokenAddress:s?.tokenAddress||"",tokenSymbol:s?.tokenName||"Tokens",onPoolUpdate:q,autoRefresh:l==="running"}),e.jsx(Ba,{tokenSymbol:s?.tokenName||"Tokens",onCalculationUpdate:M,isActive:l==="running"})]}),c==="cleanup"&&e.jsx(Ua,{})]})]})]})},Ze=({wallet:t,isAdmin:s,showPrivateKey:a,onCopy:r,tokenSymbol:l="Tokens",compact:o=!1})=>{const m=p=>`${p.slice(0,8)}...${p.slice(-8)}`,u=()=>s?"text-primary":t.isActive?"text-secondary":"text-muted-foreground",h=()=>s?e.jsx(_,{className:"w-4 h-4"}):t.isActive?e.jsx(Y,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4"}),g=()=>s?"Admin":t.isActive?"Active":"Inactive";return o?e.jsxs("div",{className:"card p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:["Wallet #",t.number]})]}),e.jsxs("div",{className:`flex items-center space-x-1 text-xs ${u()}`,children:[h(),e.jsx("span",{children:g()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Address:"}),e.jsxs("button",{onClick:()=>r(t.publicKey,"Address"),className:"flex items-center space-x-1 text-xs text-foreground hover:text-primary",children:[e.jsx("span",{className:"font-mono",children:m(t.publicKey)}),e.jsx(Fe,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"SOL:"}),e.jsx("span",{className:"text-xs font-medium text-foreground",children:t.solBalance.toFixed(6)})]}),t.tokenBalance>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[l,":"]}),e.jsx("span",{className:"text-xs font-medium text-foreground",children:t.tokenBalance.toFixed(2)})]})]})]}):e.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s?"bg-primary/10":"bg-secondary/10"}`,children:e.jsx(me,{className:`w-5 h-5 ${s?"text-primary":"text-secondary"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s?"Admin Wallet":`Trading Wallet #${t.number}`}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${u()}`,children:[h(),e.jsx("span",{children:g()})]})]})]}),t.lastActivity&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last active: ",new Date(t.lastActivity).toLocaleTimeString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(X,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"SOL Balance"})]}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:t.solBalance.toFixed(6)})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(te,{className:"w-4 h-4 text-secondary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:l})]}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:t.tokenBalance.toFixed(2)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Public Address"}),e.jsxs("button",{onClick:()=>r(t.publicKey,"Public address"),className:"flex items-center space-x-1 text-sm text-muted-foreground hover:text-foreground",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]})]}),e.jsx("div",{className:"bg-muted/30 rounded-lg p-3",children:e.jsx("p",{className:"text-sm font-mono text-foreground break-all",children:t.publicKey})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Private Key"}),e.jsxs("button",{onClick:()=>r(t.privateKey,"Private key"),className:"flex items-center space-x-1 text-sm text-muted-foreground hover:text-foreground",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]})]}),e.jsx("div",{className:"bg-muted/30 rounded-lg p-3",children:a?e.jsx("p",{className:"text-sm font-mono text-foreground break-all",children:t.privateKey}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Private key hidden for security"})]})})]}),t.generationTimestamp&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Generated: ",new Date(t.generationTimestamp).toLocaleString()]})]})]})},_a=({adminWallet:t,showPrivateKey:s,onWalletCreated:a,onCopy:r})=>{const[l,o]=x.useState(!1),[m,u]=x.useState(!1),[h,g]=x.useState(""),[p,v]=x.useState(!1),[f,w]=x.useState(null),$=async()=>{o(!0);try{const L=await U.createAdminWallet();a(L),E.success("Admin wallet created successfully!"),w(null)}catch(L){E.error(`Failed to create admin wallet: ${L instanceof Error?L.message:String(L)}`)}finally{o(!1)}},T=async()=>{if(!h.trim()){E.error("Please enter a private key");return}u(!0);try{const L=await U.importAdminWallet(h);a(L),E.success("Admin wallet imported successfully!"),g(""),w(null)}catch(L){E.error(`Failed to import admin wallet: ${L instanceof Error?L.message:String(L)}`)}finally{u(!1)}};return t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Admin Wallet Active"})]}),e.jsx(Ze,{wallet:t,isAdmin:!0,showPrivateKey:s,onCopy:r}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Admin Wallet Security"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"This wallet controls your trading session and holds your funds. Keep the private key secure and never share it. Make sure to fund this wallet with SOL before starting trading operations."})]})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Set Up Admin Wallet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new admin wallet or import an existing one to control your trading session"})]}),!f&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>w("create"),className:"p-6 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-left hover:border-solana-500 hover:bg-solana-50 dark:hover:bg-solana-900/20 transition-colors",children:[e.jsx(De,{className:"w-8 h-8 text-solana-600 dark:text-solana-400 mb-3"}),e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Create New Wallet"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Generate a fresh admin wallet with a new private key"})]}),e.jsxs("button",{onClick:()=>w("import"),className:"p-6 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-left hover:border-solana-500 hover:bg-solana-50 dark:hover:bg-solana-900/20 transition-colors",children:[e.jsx(jt,{className:"w-8 h-8 text-solana-600 dark:text-solana-400 mb-3"}),e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Import Existing Wallet"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use an existing wallet by importing its private key"})]})]}),f==="create"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Create New Admin Wallet"}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(V,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Important Security Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mt-1",children:"A new wallet will be generated with a unique private key. Make sure to save this private key securely as it cannot be recovered if lost. You'll need to fund this wallet with SOL before trading."})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:$,disabled:l,className:"flex items-center px-6 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(De,{className:"w-4 h-4 mr-2"}),l?"Creating...":"Create Admin Wallet"]}),e.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"})]})]}),f==="import"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Import Existing Admin Wallet"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Private Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",value:h,onChange:L=>g(L.target.value),placeholder:"Enter your wallet private key...",className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-solana-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>v(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:p?e.jsx(Oe,{className:"w-4 h-4"}):e.jsx(He,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-800 dark:text-red-300",children:"Security Warning"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400 mt-1",children:"Only import private keys from wallets you own and trust. Never share your private key with anyone. Make sure this connection is secure before entering sensitive information."})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:T,disabled:m||!h.trim(),className:"flex items-center px-6 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[m?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(jt,{className:"w-4 h-4 mr-2"}),m?"Importing...":"Import Wallet"]}),e.jsx("button",{onClick:()=>{w(null),g("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"})]})]})]})]})},Ha=({tradingWallets:t,showPrivateKeys:s,onWalletsGenerated:a,onCopy:r,tokenSymbol:l="Tokens"})=>{const[o,m]=x.useState(!1),[u,h]=x.useState(10),[g,p]=x.useState(""),[v,f]=x.useState("all"),w=async()=>{if(u<1||u>100){E.error("Wallet count must be between 1 and 100");return}m(!0);try{const n=await U.generateTradingWallets(u);a([...t,...n]),E.success(`Generated ${n.length} trading wallets`)}catch(n){E.error(`Failed to generate wallets: ${n instanceof Error?n.message:String(n)}`)}finally{m(!1)}},$=()=>{try{const n=t.map(d=>({number:d.number,publicKey:d.publicKey,privateKey:d.privateKey,solBalance:d.solBalance,tokenBalance:d.tokenBalance,isActive:d.isActive,generationTimestamp:d.generationTimestamp})),c=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),y=URL.createObjectURL(c),b=document.createElement("a");b.href=y,b.download=`trading_wallets_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(y),E.success("Trading wallets exported successfully")}catch{E.error("Failed to export wallets")}},T=t.filter(n=>{const c=n.publicKey.toLowerCase().includes(g.toLowerCase())||n.number.toString().includes(g),y=v==="all"||v==="active"&&n.isActive||v==="inactive"&&!n.isActive;return c&&y}),L=t.filter(n=>n.isActive).length,P=t.reduce((n,c)=>n+c.solBalance,0),S=t.reduce((n,c)=>n+c.tokenBalance,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Wallets"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1",children:t.length})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Active Wallets"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100 mt-1",children:L})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Total SOL"})}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100 mt-1",children:P.toFixed(6)})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:["Total ",l]})}),e.jsx("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100 mt-1",children:S.toFixed(2)})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search wallets...",value:g,onChange:n=>p(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-solana-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:v,onChange:n=>f(n.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-solana-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Wallets"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:t.length>0&&e.jsxs("button",{onClick:$,className:"flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Export"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Generate Trading Wallets"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsxs("div",{className:"flex-1 max-w-xs",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Number of Wallets (1-100)"}),e.jsx("input",{type:"number",min:"1",max:"100",value:u,onChange:n=>h(parseInt(n.target.value)||1),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-solana-500 focus:border-transparent"})]}),e.jsxs("button",{onClick:w,disabled:o,className:"flex items-center px-6 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(De,{className:"w-4 h-4 mr-2"}),o?"Generating...":"Generate Wallets"]})]})]}),T.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(n=>e.jsx(Ze,{wallet:n,isAdmin:!1,showPrivateKey:s,onCopy:r,tokenSymbol:l},n.publicKey))}):t.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx(ae,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Trading Wallets"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generate trading wallets to start automated trading operations"})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No wallets match your search criteria"})})]})},Va=({adminWallet:t,tradingWallets:s,onDistributionComplete:a})=>{const[r,l]=x.useState(!1),[o,m]=x.useState(1),[u,h]=x.useState(null),g=t&&s.length>0&&o>0,p=async()=>{if(!g){E.error("Admin wallet and trading wallets are required");return}l(!0),h({completed:0,total:s.length});try{const f=setInterval(()=>{h($=>!$||$.completed>=$.total?$:{...$,completed:$.completed+1,currentWallet:s[$.completed]?.publicKey})},1e3),w=await U.distributeSol(t,s,o);clearInterval(f),h(null),a(w),E.success(`Successfully distributed ${o} SOL to ${w.length} wallets`)}catch(f){h(null),E.error(`Failed to distribute SOL: ${f instanceof Error?f.message:String(f)}`)}finally{l(!1)}},v=s.length>0?o/s.length:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-5 h-5 text-solana-600 dark:text-solana-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"SOL Distribution"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[t?e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:`font-medium ${t?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"Admin Wallet"})]}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:t?`Ready (${t.solBalance.toFixed(6)} SOL available)`:"Admin wallet required"})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${s.length>0?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s.length>0?e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:`font-medium ${s.length>0?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"Trading Wallets"})]}),e.jsx("p",{className:`text-sm mt-1 ${s.length>0?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:s.length>0?`${s.length} wallets ready`:"Trading wallets required"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Distribution Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total SOL Amount to Distribute"}),e.jsx("input",{type:"number",step:"0.001",min:"0.001",value:o,onChange:f=>m(parseFloat(f.target.value)||0),disabled:r,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-solana-500 focus:border-transparent disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"SOL per Wallet"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg",children:e.jsxs("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[v.toFixed(6)," SOL"]})})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ge,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Distribution Summary"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Total Amount:"}),e.jsxs("div",{className:"font-semibold text-blue-900 dark:text-blue-100",children:[o.toFixed(6)," SOL"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Recipients:"}),e.jsxs("div",{className:"font-semibold text-blue-900 dark:text-blue-100",children:[s.length," wallets"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Per Wallet:"}),e.jsxs("div",{className:"font-semibold text-blue-900 dark:text-blue-100",children:[v.toFixed(6)," SOL"]})]})]})]}),u&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(G,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 animate-spin"}),e.jsx("span",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Distributing SOL..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-yellow-700 dark:text-yellow-400",children:["Progress: ",u.completed," / ",u.total]}),e.jsxs("span",{className:"text-yellow-700 dark:text-yellow-400",children:[Math.round(u.completed/u.total*100),"%"]})]}),e.jsx("div",{className:"w-full bg-yellow-200 dark:bg-yellow-800 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-600 dark:bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${u.completed/u.total*100}%`}})}),u.currentWallet&&e.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-mono",children:["Current: ",u.currentWallet.slice(0,8),"...",u.currentWallet.slice(-8)]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:p,disabled:!g||r,className:"w-full flex items-center justify-center px-6 py-3 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r?e.jsx(G,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(ge,{className:"w-5 h-5 mr-2"}),r?"Distributing SOL...":"Distribute SOL to Trading Wallets"]})}),t&&t.solBalance<o&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-800 dark:text-red-300",children:"Insufficient Balance"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400 mt-1",children:["Admin wallet has ",t.solBalance.toFixed(6)," SOL but you're trying to distribute ",o.toFixed(6)," SOL. Please fund your admin wallet or reduce the distribution amount."]})]})]})})]})]})},Ga=({adminWallet:t,tradingWallets:s,tokenAddress:a,tokenSymbol:r,onDistributionComplete:l})=>{const[o,m]=x.useState(!1),[u,h]=x.useState(!1),[g,p]=x.useState(0),[v,f]=x.useState("equal"),[w,$]=x.useState(0);x.useEffect(()=>{t&&a&&T()},[t,a]);const T=async()=>{if(t){h(!0);try{const y=await U.getAdminTokenBalance(t,a);p(y)}catch(y){console.error("Failed to get admin token balance:",y),p(0)}finally{h(!1)}}},L=async()=>{if(!t||s.length===0){E.error("Admin wallet and trading wallets are required");return}if(g===0){E.error("Admin wallet has no tokens to distribute");return}const y=v==="equal"?g/s.length:w;if(y<=0){E.error("Invalid distribution amount");return}const b=y*s.length;if(b>g){E.error(`Not enough tokens. Required: ${b.toFixed(2)}, Available: ${g.toFixed(2)}`);return}m(!0);try{const d=await U.distributeTokens(t,s,a,y);l(d),E.success(`Successfully distributed ${r} to ${d.length} wallets`),await T()}catch(d){E.error(`Failed to distribute tokens: ${d instanceof Error?d.message:String(d)}`)}finally{m(!1)}},P=t&&s.length>0&&g>0,S=s.length>0?g/s.length:0,n=v==="equal"?S:w,c=n*s.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[r," Token Distribution"]})]}),e.jsxs("button",{onClick:T,disabled:u||!t,className:"flex items-center px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-1 ${u?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Admin Wallet Token Balance"}),e.jsx("div",{className:`p-4 rounded-lg border ${g>0?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[g>0?e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):e.jsx(V,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),e.jsxs("span",{className:`font-medium ${g>0?"text-green-800 dark:text-green-300":"text-yellow-800 dark:text-yellow-300"}`,children:["Available ",r]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-2xl font-bold ${g>0?"text-green-900 dark:text-green-100":"text-yellow-900 dark:text-yellow-100"}`,children:u?e.jsx(G,{className:"w-6 h-6 animate-spin inline"}):g.toFixed(2)}),e.jsx("p",{className:`text-sm ${g>0?"text-green-700 dark:text-green-400":"text-yellow-700 dark:text-yellow-400"}`,children:g>0?"Ready for distribution":"No tokens available"})]})]})}),g===0&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(V,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-blue-800 dark:text-blue-300",children:"No Tokens Found"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:["Your admin wallet doesn't have any ",r," tokens. You can skip this step and distribute tokens later, or acquire some ",r," tokens first."]})]})]})})]}),g>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Distribution Settings"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Distribution Mode"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>f("equal"),className:`p-4 border-2 rounded-lg text-left transition-colors ${v==="equal"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:"Equal Distribution"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Distribute all tokens equally among wallets"}),v==="equal"&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:[S.toFixed(2)," ",r," per wallet"]})]}),e.jsxs("button",{onClick:()=>f("custom"),className:`p-4 border-2 rounded-lg text-left transition-colors ${v==="custom"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:"Custom Amount"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Specify amount per wallet"})]})]})]}),v==="custom"&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[r," per Wallet"]}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:g,value:w,onChange:y=>$(parseFloat(y.target.value)||0),disabled:o,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent disabled:opacity-50"})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ge,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-300",children:"Distribution Summary"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Per Wallet:"}),e.jsxs("div",{className:"font-semibold text-green-900 dark:text-green-100",children:[n.toFixed(2)," ",r]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Recipients:"}),e.jsxs("div",{className:"font-semibold text-green-900 dark:text-green-100",children:[s.length," wallets"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Total Required:"}),e.jsxs("div",{className:"font-semibold text-green-900 dark:text-green-100",children:[c.toFixed(2)," ",r]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:L,disabled:!P||o||c>g,className:"w-full flex items-center justify-center px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o?e.jsx(G,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(ge,{className:"w-5 h-5 mr-2"}),o?`Distributing ${r}...`:`Distribute ${r} to Trading Wallets`]})}),c>g&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-800 dark:text-red-300",children:"Insufficient Tokens"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400 mt-1",children:["You need ",c.toFixed(2)," ",r," but only have ",g.toFixed(2)," ",r," available. Reduce the amount per wallet or acquire more tokens."]})]})]})})]})]})},za=({adminWallet:t,tradingWallets:s,showPrivateKeys:a,onTogglePrivateKeys:r})=>{const[l,o]=x.useState(new Set),[m,u]=x.useState("json"),h=t?[t,...s]:s,g=async(T,L)=>{try{await navigator.clipboard.writeText(T),E.success(`${L} copied to clipboard`)}catch{E.error("Failed to copy to clipboard")}},p=()=>{const T=h.filter(b=>l.has(b.publicKey));if(T.length===0){E.error("Please select wallets to export");return}let L="",P="",S="";switch(m){case"json":L=JSON.stringify(T.map(b=>({number:b.number,publicKey:b.publicKey,privateKey:b.privateKey,isAdmin:b.number===0})),null,2),P=`wallet_keys_${new Date().toISOString().split("T")[0]}.json`,S="application/json";break;case"csv":L=`Number,Type,PublicKey,PrivateKey
`+T.map(b=>`${b.number},${b.number===0?"Admin":"Trading"},"${b.publicKey}","${b.privateKey}"`).join(`
`),P=`wallet_keys_${new Date().toISOString().split("T")[0]}.csv`,S="text/csv";break;case"txt":L=T.map(b=>`${b.number===0?"Admin":"Trading"} Wallet #${b.number}
Public Key: ${b.publicKey}
Private Key: ${b.privateKey}

`).join(""),P=`wallet_keys_${new Date().toISOString().split("T")[0]}.txt`,S="text/plain";break}const n=new Blob([L],{type:S}),c=URL.createObjectURL(n),y=document.createElement("a");y.href=c,y.download=P,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(c),E.success(`Exported ${T.length} wallet keys`)},v=T=>{const L=new Set(l);L.has(T)?L.delete(T):L.add(T),o(L)},f=()=>{o(new Set(h.map(T=>T.publicKey)))},w=()=>{o(new Set)},$=[{name:"Private Key Visibility",status:!a,description:a?"Private keys are currently visible":"Private keys are hidden for security",action:r,actionText:a?"Hide Keys":"Show Keys",icon:a?vs:ws},{name:"Admin Wallet Security",status:!!t,description:t?"Admin wallet is configured":"No admin wallet configured",icon:Pe},{name:"Trading Wallets",status:s.length>0,description:`${s.length} trading wallets configured`,icon:Pt}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:$.map(T=>{const L=T.icon;return e.jsxs("div",{className:`p-4 rounded-lg border ${T.status?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(L,{className:`w-5 h-5 ${T.status?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`}),e.jsx("span",{className:`font-medium ${T.status?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:T.name})]}),e.jsx("p",{className:`text-sm ${T.status?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:T.description}),T.action&&e.jsx("button",{onClick:T.action,className:`mt-2 text-sm font-medium ${T.status?"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200":"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200"}`,children:T.actionText})]},T.name)})}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ie,{className:"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Critical Security Guidelines"}),e.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-400 space-y-1",children:[e.jsx("li",{children:"• Never share your private keys with anyone"}),e.jsx("li",{children:"• Store private keys securely offline when not in use"}),e.jsx("li",{children:"• Use secure connections when accessing wallet management"}),e.jsx("li",{children:"• Regularly backup your wallet data"}),e.jsx("li",{children:"• Monitor wallet balances for unauthorized transactions"})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Private Key Management"}),e.jsx("button",{onClick:r,className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${a?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/30":"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/30"}`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Hide Private Keys"]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Show Private Keys"]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Select Wallets for Export (",l.size," selected)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:f,className:"text-sm text-solana-600 dark:text-solana-400 hover:text-solana-700 dark:hover:text-solana-300",children:"Select All"}),e.jsx("button",{onClick:w,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Clear"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-60 overflow-y-auto",children:h.map(T=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${l.has(T.publicKey)?"border-solana-500 bg-solana-50 dark:bg-solana-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>v(T.publicKey),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${l.has(T.publicKey)?"border-solana-500 bg-solana-500":"border-gray-300 dark:border-gray-600"}`,children:l.has(T.publicKey)&&e.jsx(_,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:T.number===0?"Admin Wallet":`Trading Wallet #${T.number}`}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:[T.publicKey.slice(0,8),"...",T.publicKey.slice(-8)]})]})]}),a&&e.jsx("button",{onClick:L=>{L.stopPropagation(),g(T.privateKey,"Private key")},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(Fe,{className:"w-4 h-4"})})]})},T.publicKey))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Export Format"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"json",label:"JSON",description:"Structured data format"},{value:"csv",label:"CSV",description:"Spreadsheet compatible"},{value:"txt",label:"Text",description:"Plain text format"}].map(T=>e.jsxs("button",{onClick:()=>u(T.value),className:`p-3 border rounded-lg text-left transition-colors ${m===T.value?"border-solana-500 bg-solana-50 dark:bg-solana-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:T.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.description})]},T.value))})]}),e.jsxs("button",{onClick:p,disabled:l.size===0,className:"w-full flex items-center justify-center px-6 py-3 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Ae,{className:"w-5 h-5 mr-2"}),"Export Selected Wallets (",l.size,")"]})]})]})]})},qa=()=>{const t=re(),{adminWallet:s,tradingWallets:a,totalSolBalance:r,totalTokenBalance:l,isLoading:o}=K(y=>y.wallet),{currentSession:m}=K(y=>y.session),[u,h]=x.useState("overview"),[g,p]=x.useState(!1),[v,f]=x.useState(!1),w=a.filter(y=>y.isActive).length,$=a.length+(s?1:0),T=$>0?r/$:0;x.useEffect(()=>{t(la())},[s,a,t]);const L=async()=>{if(!s&&a.length===0){E.error("No wallets to refresh");return}p(!0);try{const y=[];s&&y.push(s),y.push(...a);const b=await U.getWalletBalances(y),d=b.find(N=>N.number===0);d&&t(Qe(d));const j=b.filter(N=>N.number>0);j.length>0&&t(Ne(j)),E.success("Wallet balances refreshed")}catch(y){E.error(`Failed to refresh balances: ${y instanceof Error?y.message:String(y)}`)}finally{p(!1)}},P=()=>{try{const y={admin:s,trading:a,session:m?.tokenName||"Unknown",exportedAt:new Date().toISOString()},b=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),d=URL.createObjectURL(b),j=document.createElement("a");j.href=d,j.download=`wallets_${m?.tokenName||"export"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(d),E.success("Wallet data exported successfully")}catch{E.error("Failed to export wallet data")}},S=async(y,b)=>{try{await navigator.clipboard.writeText(y),E.success(`${b} copied to clipboard`)}catch{E.error("Failed to copy to clipboard")}},n=[{id:"overview",name:"Overview",icon:Y},{id:"admin",name:"Admin Wallet",icon:Pe},{id:"trading",name:"Trading Wallets",icon:ae},{id:"distribution",name:"Distribution",icon:ge},{id:"security",name:"Security",icon:Pt}],c=[{name:"Total SOL Balance",value:r.toFixed(6),unit:"SOL",icon:X,color:"text-solana-600 dark:text-solana-400",bgColor:"bg-solana-50 dark:bg-solana-900/20"},{name:"Total Token Balance",value:l.toFixed(2),unit:m?.tokenName||"Tokens",icon:me,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900/20"},{name:"Active Wallets",value:w.toString(),unit:`of ${$}`,icon:ae,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{name:"Average Balance",value:T.toFixed(6),unit:"SOL",icon:Y,color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-50 dark:bg-orange-900/20"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Wallet Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your admin and trading wallets"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>f(!v),className:`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${v?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[v?e.jsx(Oe,{className:"w-4 h-4 mr-2"}):e.jsx(He,{className:"w-4 h-4 mr-2"}),v?"Hide Keys":"Show Keys"]}),e.jsxs("button",{onClick:L,disabled:g,className:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-2 ${g?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:P,className:"flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map(y=>{const b=y.icon;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:y.name}),e.jsxs("div",{className:"flex items-baseline space-x-2 mt-1",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.value}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.unit})]})]}),e.jsx("div",{className:`p-3 rounded-lg ${y.bgColor}`,children:e.jsx(b,{className:`w-6 h-6 ${y.color}`})})]})},y.name)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:n.map(y=>{const b=y.icon,d=u===y.id;return e.jsxs("button",{onClick:()=>h(y.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d?"border-solana-500 text-solana-600 dark:text-solana-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:y.name})]},y.id)})})}),e.jsxs("div",{className:"p-6",children:[u==="overview"&&e.jsxs("div",{className:"space-y-6",children:[s?e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Admin Wallet"}),e.jsx(Ze,{wallet:s,isAdmin:!0,showPrivateKey:v,onCopy:S,tokenSymbol:m?.tokenName})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Admin Wallet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create or import an admin wallet to get started"}),e.jsxs("button",{onClick:()=>h("admin"),className:"inline-flex items-center px-4 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Set Up Admin Wallet"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Trading Wallets (",a.length,")"]}),a.length>0&&e.jsxs("button",{onClick:()=>h("trading"),className:"text-solana-600 dark:text-solana-400 hover:text-solana-700 dark:hover:text-solana-300 text-sm font-medium",children:["View All ",e.jsx(Ke,{className:"w-4 h-4 inline ml-1"})]})]}),a.length>0?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.slice(0,6).map(y=>e.jsx(Ze,{wallet:y,isAdmin:!1,showPrivateKey:v,onCopy:S,tokenSymbol:m?.tokenName,compact:!0},y.publicKey)),a.length>6&&e.jsx("div",{className:"flex items-center justify-center p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:["+",a.length-6," more wallets"]}),e.jsx("button",{onClick:()=>h("trading"),className:"text-solana-600 dark:text-solana-400 hover:text-solana-700 dark:hover:text-solana-300 text-sm font-medium mt-1",children:"View All"})]})})]}):e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx(ae,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Trading Wallets"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Generate trading wallets to start automated trading"}),e.jsxs("button",{onClick:()=>h("trading"),className:"inline-flex items-center px-4 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Generate Wallets"]})]})]})]}),u==="admin"&&e.jsx(_a,{adminWallet:s,showPrivateKey:v,onWalletCreated:y=>t(Qe(y)),onCopy:S}),u==="trading"&&e.jsx(Ha,{tradingWallets:a,showPrivateKeys:v,onWalletsGenerated:y=>t(Ne(y)),onCopy:S,tokenSymbol:m?.tokenName}),u==="distribution"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(Va,{adminWallet:s,tradingWallets:a,onDistributionComplete:y=>t(Ne(y))}),m&&e.jsx(Ga,{adminWallet:s,tradingWallets:a,tokenAddress:m.tokenAddress,tokenSymbol:m.tokenName,onDistributionComplete:y=>t(Ne(y))})]}),u==="security"&&e.jsx(za,{adminWallet:s,tradingWallets:a,showPrivateKeys:v,onTogglePrivateKeys:()=>f(!v)})]})]})]})},Ja=()=>{const t=re(),{swapConfig:s,hasUnsavedChanges:a,isLoading:r}=K(S=>S.config),[l,o]=x.useState(!1),[m,u]=x.useState("untested"),[h,g]=x.useState(null),[p,v]=x.useState({...s});x.useEffect(()=>{v({...s})},[s]);const f=(S,n)=>{const c=!isNaN(Number(n))&&n!==""?Number(n):n;v({...p,[S]:c})},w=()=>{t(da(p)),t(xa()),E.success("Configuration saved successfully")},$=()=>{confirm("Are you sure you want to reset all settings to default values?")&&(t(ca()),E.success("Configuration reset to defaults"))},T=()=>{v({...s}),t(ma()),E.success("Changes discarded")},L=async()=>{o(!0),u("untested"),g(null);try{const S=Date.now(),n=await fetch(p.RPC_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getHealth"})}),c=Date.now()-S;g(c),n.ok?(await n.json()).result==="ok"?(u("success"),E.success(`RPC connection successful (${c}ms)`)):(u("error"),E.error("RPC connection failed: Unhealthy node")):(u("error"),E.error(`RPC connection failed: ${n.statusText}`))}catch(S){u("error"),E.error(`RPC connection failed: ${S instanceof Error?S.message:String(S)}`)}finally{o(!1)}},P=[{title:"Connection Settings",icon:lt,fields:[{key:"RPC_URL",label:"RPC URL",type:"text",description:"Solana RPC endpoint URL"},{key:"WS_URL",label:"WebSocket URL",type:"text",description:"Solana WebSocket endpoint URL"}]},{title:"Address Configuration",icon:lt,fields:[{key:"WSOL_ADDRESS",label:"WSOL Address",type:"text",description:"Wrapped SOL token address"},{key:"RAYDIUM_LIQUIDITY_POOL_V4_ADDRESS",label:"Raydium Liquidity Pool V4 Address",type:"text",description:"Raydium liquidity pool program address"}]},{title:"Swap Configuration",icon:Ss,fields:[{key:"SLIPPAGE_PERCENT",label:"Slippage Percentage",type:"number",description:"Maximum allowed slippage for swaps",step:"0.1"},{key:"initialAmount",label:"Initial Amount",type:"number",description:"Initial amount of SOL to swap",step:"0.00001"},{key:"TOKEN_TRANSFER_THRESHOLD",label:"Token Transfer Threshold",type:"number",description:"Minimum tokens to keep in wallet",step:"0.1"}]},{title:"Retry Configuration",icon:Cs,fields:[{key:"poolSearchMaxRetries",label:"Pool Search Max Retries",type:"number",description:"Maximum number of retries for pool search"},{key:"poolSearchRetryInterval",label:"Pool Search Retry Interval (ms)",type:"number",description:"Retry interval for pool search in milliseconds"},{key:"retryInterval",label:"Retry Interval (ms)",type:"number",description:"Time interval in milliseconds for retrying failed transactions"},{key:"maxRetries",label:"Max Retries",type:"number",description:"Maximum retries for sending transactions"}]},{title:"Fees and Limits",icon:X,fields:[{key:"RENT_EXEMPT_FEE",label:"Rent Exempt Fee",type:"number",description:"Rent exempt fee for token accounts"},{key:"maxLamports",label:"Max Lamports",type:"number",description:"Maximum lamports for transaction"},{key:"RENT_EXEMPT_SWAP_FEE",label:"Rent Exempt Swap Fee",type:"number",description:"Rent exempt fee for swap transactions"}]},{title:"Trading Durations",icon:J,fields:[{key:"TRADE_DURATION_VOLUME",label:"Volume Trading Duration (ms)",type:"number",description:"Duration for volume-focused trading strategy"},{key:"TRADE_DURATION_MAKER",label:"Maker Trading Duration (ms)",type:"number",description:"Duration for maker-focused trading strategy"},{key:"loopInterval",label:"Loop Interval (ms)",type:"number",description:"Loop interval in milliseconds"},{key:"buyDuration",label:"Buy Phase Duration (ms)",type:"number",description:"Duration of buy phase in milliseconds"},{key:"sellDuration",label:"Sell Phase Duration (ms)",type:"number",description:"Duration of sell phase in milliseconds"}]},{title:"Percentage Configuration",icon:Rt,fields:[{key:"minPercentage",label:"Min Buy Percentage",type:"number",description:"Minimum percentage for buy amounts",step:"0.1"},{key:"maxPercentage",label:"Max Buy Percentage",type:"number",description:"Maximum percentage for buy amounts",step:"0.1"},{key:"minSellPercentage",label:"Min Sell Percentage",type:"number",description:"Minimum percentage for sell amounts",step:"0.1"},{key:"maxSellPercentage",label:"Max Sell Percentage",type:"number",description:"Maximum percentage for sell amounts",step:"0.1"}]},{title:"Session Configuration",icon:Ts,fields:[{key:"SESSION_DIR",label:"Session Directory",type:"text",description:"Directory to save session data"}]}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Configuration Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your trading bot configuration"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[a&&e.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Discard Changes"}),e.jsxs("button",{onClick:$,className:"flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Reset to Defaults"]}),e.jsxs("button",{onClick:w,disabled:r||!a,className:"flex items-center px-4 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Nt,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"RPC Connection Test"})]}),e.jsxs("button",{onClick:L,disabled:l,className:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg disabled:opacity-50 transition-colors",children:[l?e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Test Connection"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"RPC URL"}),e.jsx("input",{type:"text",value:p.RPC_URL,onChange:S=>f("RPC_URL",S.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[m==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-green-700 dark:text-green-300",children:["Connected ",h&&`(${h}ms)`]})]}),m==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"text-red-700 dark:text-red-300",children:"Connection Failed"})]})]})]})]}),P.map(S=>{const n=S.icon;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(n,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S.title})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.fields.map(c=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:c.label}),e.jsx("input",{type:c.type,value:p[c.key],onChange:y=>f(c.key,y.target.value),step:"step"in c?c.step:void 0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:c.description})]},c.key))})]},S.title)}),a&&e.jsx("div",{className:"fixed bottom-6 right-6",children:e.jsxs("button",{onClick:w,disabled:r,className:"flex items-center px-6 py-3 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r?e.jsx(G,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(Nt,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})},Ya=({logs:t,maxHeight:s="400px",title:a="System Logs",autoScroll:r=!0,showControls:l=!0,showTimestamps:o=!0,showSource:m=!0})=>{const{messages:u}=K(i=>i.websocket),[h,g]=x.useState([]),[p,v]=x.useState([]),[f,w]=x.useState(""),[$,T]=x.useState("all"),[L,P]=x.useState(r),S=x.useRef(null);x.useEffect(()=>{if(t)g(t);else{const i=u.map(k=>({id:k.id,timestamp:k.timestamp,level:k.type==="error"?"error":k.type==="warning"?"warning":k.type==="success"?"success":k.type==="debug"?"debug":"info",message:typeof k.data=="string"?k.data:k.data.message||JSON.stringify(k.data),source:k.type,details:k.data}));g(i)}},[t,u]),x.useEffect(()=>{let i=h;f&&(i=i.filter(k=>k.message.toLowerCase().includes(f.toLowerCase())||k.source.toLowerCase().includes(f.toLowerCase()))),$!=="all"&&(i=i.filter(k=>k.level===$)),v(i)},[h,f,$]),x.useEffect(()=>{L&&S.current&&(S.current.scrollTop=S.current.scrollHeight)},[p,L]);const n=()=>{confirm("Are you sure you want to clear all logs?")&&(g([]),E.success("Logs cleared"))},c=()=>{const i=h.map(O=>`[${new Date(O.timestamp).toISOString()}] [${O.level.toUpperCase()}] [${O.source}] ${O.message}`).join(`
`),k=new Blob([i],{type:"text/plain"}),C=URL.createObjectURL(k),F=document.createElement("a");F.href=C,F.download=`solana-trading-bot-logs-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(C),E.success("Logs downloaded")},y=async()=>{const i=h.map(k=>`[${new Date(k.timestamp).toISOString()}] [${k.level.toUpperCase()}] [${k.source}] ${k.message}`).join(`
`);try{await navigator.clipboard.writeText(i),E.success("Logs copied to clipboard")}catch{E.error("Failed to copy logs to clipboard")}},b=i=>{switch(i){case"info":return e.jsx(Ye,{className:"w-4 h-4 text-blue-500"});case"warning":return e.jsx(V,{className:"w-4 h-4 text-yellow-500"});case"error":return e.jsx(V,{className:"w-4 h-4 text-red-500"});case"success":return e.jsx(_,{className:"w-4 h-4 text-green-500"});case"debug":return e.jsx(ke,{className:"w-4 h-4 text-purple-500"});default:return e.jsx(Ye,{className:"w-4 h-4 text-gray-500"})}},d=i=>{switch(i){case"info":return"text-blue-600 dark:text-blue-400";case"warning":return"text-yellow-600 dark:text-yellow-400";case"error":return"text-red-600 dark:text-red-400";case"success":return"text-green-600 dark:text-green-400";case"debug":return"text-purple-600 dark:text-purple-400";default:return"text-gray-600 dark:text-gray-400"}},j=i=>{switch(i){case"info":return"bg-blue-50 dark:bg-blue-900/10";case"warning":return"bg-yellow-50 dark:bg-yellow-900/10";case"error":return"bg-red-50 dark:bg-red-900/10";case"success":return"bg-green-50 dark:bg-green-900/10";case"debug":return"bg-purple-50 dark:bg-purple-900/10";default:return"bg-gray-50 dark:bg-gray-900/10"}},N=i=>new Date(i).toLocaleTimeString();return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p.length," entries"]})]}),l&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>P(!L),className:`flex items-center p-1 rounded ${L?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-600"}`,title:L?"Disable auto-scroll":"Enable auto-scroll",children:L?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(As,{className:"w-4 h-4"})}),e.jsx("button",{onClick:y,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Copy logs to clipboard",children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:c,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Download logs",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Clear logs",children:e.jsx(Se,{className:"w-4 h-4"})})]})]}),l&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:f,onChange:i=>w(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:$,onChange:i=>T(i.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warnings"}),e.jsx("option",{value:"error",children:"Errors"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"debug",children:"Debug"})]})]})]}),e.jsx("div",{ref:S,className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-y-auto font-mono text-sm",style:{maxHeight:s},children:p.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:p.map(i=>e.jsx("div",{className:`p-3 ${j(i.level)}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:b(i.level)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[o&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:N(i.timestamp)}),m&&e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${d(i.level)} bg-opacity-10`,children:i.source})]}),e.jsx("p",{className:"mt-1 text-gray-900 dark:text-white whitespace-pre-wrap break-words",children:i.message}),i.details&&typeof i.details=="object"&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-gray-500 dark:text-gray-400 cursor-pointer",children:"Details"}),e.jsx("pre",{className:"mt-1 p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs overflow-x-auto",children:JSON.stringify(i.details,null,2)})]})]})]})},i.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ke,{className:"w-12 h-12 mb-2"}),e.jsx("p",{children:"No logs to display"}),f&&e.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search or filter"})]})}),l&&h.length>0&&e.jsxs("div",{className:"mt-4 flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{children:["Showing ",p.length," of ",h.length," logs"]}),e.jsx("div",{children:h.length>0&&e.jsxs("span",{children:["First: ",N(h[0].timestamp)," | Last: ",N(h[h.length-1].timestamp)]})})]})]})},Xa=({refreshInterval:t=5e3,showCharts:s=!0})=>{const[a,r]=x.useState([{name:"CPU Usage",value:0,unit:"%"},{name:"Memory Usage",value:0,unit:"MB"},{name:"Network Latency",value:0,unit:"ms"},{name:"Transactions/sec",value:0,unit:"tx/s"},{name:"Success Rate",value:0,unit:"%"},{name:"Uptime",value:0,unit:"min"}]),[l,o]=x.useState([]),[m,u]=x.useState([]),[h,g]=x.useState([]),[p,v]=x.useState([]),[f,w]=x.useState(!1),[$,T]=x.useState(null);x.useEffect(()=>{const c=async()=>{w(!0);try{const b=a.map(N=>{let i;switch(N.name){case"CPU Usage":i=Math.min(100,Math.max(0,N.value+(Math.random()-.5)*10));break;case"Memory Usage":i=Math.max(50,N.value+(Math.random()-.5)*20);break;case"Network Latency":i=Math.max(10,N.value+(Math.random()-.5)*30);break;case"Transactions/sec":i=Math.max(0,N.value+(Math.random()-.5)*5);break;case"Success Rate":i=Math.min(100,Math.max(70,N.value+(Math.random()-.5)*5));break;case"Uptime":i=N.value+t/6e4;break;default:i=N.value}const k=i-N.value,C=k>0?"increase":k<0?"decrease":"neutral";return{...N,value:Number(i.toFixed(2)),change:Number(Math.abs(k).toFixed(2)),changeType:C}});r(b);const d=new Date,j=d.toLocaleTimeString();o(N=>[...N,{name:j,CPU:b[0].value}].slice(-20)),u(N=>[...N,{name:j,Memory:b[1].value}].slice(-20)),g(N=>[...N,{name:j,TPS:b[3].value,Success:b[4].value}].slice(-20)),v(N=>[...N,{name:j,Latency:b[2].value}].slice(-20)),T(d)}catch(b){console.error("Error fetching performance metrics:",b)}finally{w(!1)}};c();const y=setInterval(c,t);return()=>clearInterval(y)},[a,t]);const L=c=>{switch(c){case"CPU Usage":return e.jsx(ct,{className:"w-5 h-5 text-blue-500"});case"Memory Usage":return e.jsx(Je,{className:"w-5 h-5 text-purple-500"});case"Network Latency":return e.jsx(Be,{className:"w-5 h-5 text-green-500"});case"Transactions/sec":return e.jsx(Y,{className:"w-5 h-5 text-orange-500"});case"Success Rate":return e.jsx(ee,{className:"w-5 h-5 text-red-500"});case"Uptime":return e.jsx(J,{className:"w-5 h-5 text-indigo-500"});default:return e.jsx(we,{className:"w-5 h-5 text-gray-500"})}},P=c=>{switch(c){case"increase":return"text-green-500";case"decrease":return"text-red-500";default:return"text-gray-500"}},S=c=>{switch(c){case"increase":return e.jsx(ee,{className:"w-3 h-3"});case"decrease":return e.jsx(ee,{className:"w-3 h-3 transform rotate-180"});default:return null}},n=(c,y)=>{if(y==="min"){const b=Math.floor(c/60),d=Math.floor(c%60);return`${b}h ${d}m`}return`${c} ${y}`};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Metrics"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[$&&e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",$.toLocaleTimeString()]}),e.jsxs("button",{onClick:()=>{},disabled:f,className:"flex items-center px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-1 ${f?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:a.map(c=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700",children:L(c.name)}),c.change!==void 0&&c.changeType&&e.jsxs("div",{className:`flex items-center space-x-1 text-xs ${P(c.changeType)}`,children:[S(c.changeType),e.jsx("span",{children:c.change})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:c.name}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white mt-1",children:n(c.value,c.unit)})]})]},c.name))}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ct,{className:"w-4 h-4 text-blue-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"CPU Usage"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(kt,{data:l,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"name",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(vt,{type:"monotone",dataKey:"CPU",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.2})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Je,{className:"w-4 h-4 text-purple-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Memory Usage"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(kt,{data:m,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"name",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(vt,{type:"monotone",dataKey:"Memory",stroke:"#8B5CF6",fill:"#8B5CF6",fillOpacity:.2})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Y,{className:"w-4 h-4 text-orange-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Transaction Performance"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(xt,{data:h,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"name",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(Re,{}),e.jsx(pe,{type:"monotone",dataKey:"TPS",stroke:"#F97316",activeDot:{r:8}}),e.jsx(pe,{type:"monotone",dataKey:"Success",stroke:"#22C55E"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Be,{className:"w-4 h-4 text-green-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Network Latency"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(qe,{data:p,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"name",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(je,{dataKey:"Latency",fill:"#10B981"})]})})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ue,{className:"w-4 h-4 text-indigo-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"System Health"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Backend API"})]}),e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Operational"})]})}),e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Solana RPC"})]}),e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Connected"})]})}),e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Trading Engine"})]}),e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Running"})]})})]})]})]})]})},Qa=({errors:t,onResolve:s,onClear:a})=>{const{messages:r}=K(d=>d.websocket),[l,o]=x.useState([]),[m,u]=x.useState([]),[h,g]=x.useState(""),[p,v]=x.useState("all"),[f,w]=x.useState("all"),[$,T]=x.useState(!1);x.useEffect(()=>{if(t)o(t);else{const d=r.filter(N=>N.type==="error"),j=new Map;d.forEach(N=>{const i=typeof N.data=="string"?N.data:N.data.message||JSON.stringify(N.data),k=i.slice(0,100);if(j.has(k)){const C=j.get(k);j.set(k,{...C,occurrences:C.occurrences+1,lastOccurrence:N.timestamp})}else j.set(k,{id:N.id,timestamp:N.timestamp,message:i,source:N.data.source||"unknown",stack:N.data.stack,resolved:!1,severity:L(i),occurrences:1,lastOccurrence:N.timestamp})}),o(Array.from(j.values()))}},[t,r]),x.useEffect(()=>{let d=l;h&&(d=d.filter(j=>j instanceof Error?j.message:String(j).toLowerCase().includes(h.toLowerCase())||j.source.toLowerCase().includes(h.toLowerCase()))),p!=="all"&&(d=d.filter(j=>j.severity===p)),f!=="all"&&(d=d.filter(j=>f==="resolved"?j.resolved:!j.resolved)),u(d)},[l,h,p,f]);const L=d=>{const j=d.toLowerCase();return j.includes("critical")||j.includes("fatal")||j.includes("crash")?"critical":j.includes("error")||j.includes("exception")||j.includes("failed")?"high":j.includes("warning")||j.includes("timeout")||j.includes("retry")?"medium":"low"},P=d=>{s?s(d):(o(j=>j.map(N=>N.id===d?{...N,resolved:!0,resolvedAt:Date.now()}:N)),E.success("Error marked as resolved"))},S=()=>{confirm("Are you sure you want to clear all errors?")&&(a?a():o([]),E.success("All errors cleared"))},n=()=>{T(!0),setTimeout(()=>{T(!1),E.success("Error data refreshed")},1e3)},c=()=>{const d=l.map(k=>`[${new Date(k.timestamp).toISOString()}] [${k.severity.toUpperCase()}] [${k.source}] ${k instanceof Error?k.message:String(k)}${k.stack?`
Stack: `+k.stack:""}`).join(`

`),j=new Blob([d],{type:"text/plain"}),N=URL.createObjectURL(j),i=document.createElement("a");i.href=N,i.download=`error-report-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(N),E.success("Error report downloaded")},y=d=>{switch(d){case"critical":return"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20";case"high":return"text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/20";case"medium":return"text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/20";case"low":return"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/20";default:return"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-900/20"}},b=d=>{const j=Math.floor((Date.now()-d)/1e3);if(j<60)return`${j}s ago`;const N=Math.floor(j/60);if(N<60)return`${N}m ago`;const i=Math.floor(N/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Error Monitor"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m.length," errors"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:n,disabled:$,className:"flex items-center px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-1 ${$?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:c,disabled:l.length===0,className:"flex items-center px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),"Export"]}),e.jsxs("button",{onClick:S,disabled:l.length===0,className:"flex items-center px-3 py-1 text-sm bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Se,{className:"w-4 h-4 mr-1"}),"Clear All"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search errors...",value:h,onChange:d=>g(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:p,onChange:d=>v(d.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Severities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:f,onChange:d=>w(d.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})]})]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:m.length>0?m.map(d=>e.jsx("div",{className:`p-4 border rounded-lg ${d.resolved?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/10":"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/10"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[d.resolved?e.jsx(_,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}):e.jsx(tt,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:d instanceof Error?d.message:String(d).length>100?d instanceof Error?d.message:String(d).slice(0,100)+"...":d instanceof Error?d.message:String(d)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${y(d.severity)}`,children:d.severity})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Source: ",d.source]}),e.jsxs("span",{children:["First: ",b(d.timestamp)]}),d.occurrences>1&&e.jsxs("span",{children:["Last: ",b(d.lastOccurrence)]}),d.occurrences>1&&e.jsxs("span",{className:"text-red-600 dark:text-red-400",children:[d.occurrences," occurrences"]})]}),d.stack&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-sm text-gray-600 dark:text-gray-400 cursor-pointer",children:"Stack Trace"}),e.jsx("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-900 rounded text-xs text-gray-800 dark:text-gray-200 overflow-x-auto",children:d.stack})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:d.resolved?e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-green-600 dark:text-green-400",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsxs("span",{children:["Resolved ",d.resolvedAt?b(d.resolvedAt):""]})]}):e.jsxs("button",{onClick:()=>P(d.id),className:"flex items-center px-3 py-1 text-sm bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"Resolve"]})})]})},d.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-gray-500 dark:text-gray-400",children:[e.jsx(_,{className:"w-12 h-12 text-green-500 mb-2"}),e.jsx("p",{className:"text-lg font-medium text-green-600 dark:text-green-400",children:"No errors to display"}),e.jsx("p",{className:"text-sm mt-1",children:h||p!=="all"||f!=="all"?"Try adjusting your search or filters":"Your system is running smoothly"})]})}),l.length>0&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:l.length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Errors"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:l.filter(d=>!d.resolved).length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Errors"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:l.filter(d=>d.resolved).length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Resolved Errors"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:l.reduce((d,j)=>d+j.occurrences,0)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Occurrences"})]})]})})]})},Za=({changes:t,tokenSymbol:s="Tokens",refreshInterval:a=1e4})=>{const{adminWallet:r,tradingWallets:l}=K(i=>i.wallet),[o,m]=x.useState([]),[u,h]=x.useState(!1),[g,p]=x.useState("1h"),[v,f]=x.useState([]),[w,$]=x.useState([]);x.useEffect(()=>{if(t)m(t);else{const i=[],k=Date.now(),C=36e5;for(let F=24;F>=0;F--){const O=k-F*C;if(r){const B=(Math.random()-.4)*.1,A=(Math.random()-.4)*100;i.push({id:`admin-${O}`,timestamp:O,walletNumber:0,walletAddress:r.publicKey,solBefore:r.solBalance-B,solAfter:r.solBalance,solChange:B,tokenBefore:r.tokenBalance-A,tokenAfter:r.tokenBalance,tokenChange:A,source:Math.random()>.5?"Trading":"Collection",details:`Balance update at ${new Date(O).toLocaleTimeString()}`})}for(let B=0;B<Math.min(3,l.length);B++){const A=l[B],I=(Math.random()-.6)*.05,R=(Math.random()-.6)*50;i.push({id:`wallet-${B}-${O}`,timestamp:O,walletNumber:A.number,walletAddress:A.publicKey,solBefore:A.solBalance-I,solAfter:A.solBalance,solChange:I,tokenBefore:A.tokenBalance-R,tokenAfter:A.tokenBalance,tokenChange:R,source:Math.random()>.7?"Buy":"Sell",details:`Transaction at ${new Date(O).toLocaleTimeString()}`})}}m(i)}},[t,r,l]),x.useEffect(()=>{if(o.length===0)return;const i=Date.now(),k=g==="1h"?36e5:g==="24h"?864e5:g==="7d"?6048e5:Number.MAX_SAFE_INTEGER,C=o.filter(A=>i-A.timestamp<k),F=new Map;C.forEach(A=>{const I=new Date(A.timestamp).toLocaleTimeString([],{hour:"2-digit"});F.has(I)||F.set(I,{time:I,solChange:0,tokenChange:0,adminSolBalance:0,adminTokenBalance:0,tradingSolBalance:0,tradingTokenBalance:0});const R=F.get(I);R.solChange+=A.solChange,R.tokenChange+=A.tokenChange,A.walletNumber===0?(R.adminSolBalance=A.solAfter,R.adminTokenBalance=A.tokenAfter):(R.tradingSolBalance+=A.solAfter,R.tradingTokenBalance+=A.tokenAfter)});const O=Array.from(F.values()).sort((A,I)=>A.time.localeCompare(I.time)),B=Array.from(F.values()).sort((A,I)=>A.time.localeCompare(I.time));f(O),$(B)},[o,g]);const T=()=>{h(!0),setTimeout(()=>{h(!1)},1e3)},L=i=>new Date(i).toLocaleString(),P=i=>{const k=Math.floor((Date.now()-i)/1e3);if(k<60)return`${k}s ago`;const C=Math.floor(k/60);if(C<60)return`${C}m ago`;const F=Math.floor(C/60);return F<24?`${F}h ago`:`${Math.floor(F/24)}d ago`},S=i=>i>0?"text-green-600 dark:text-green-400":i<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400",n=i=>i>0?e.jsx(ee,{className:"w-4 h-4"}):i<0?e.jsx(We,{className:"w-4 h-4"}):null,c=(i,k=!0)=>`${i>0?"+":""}${i.toFixed(k?6:2)}`,y=o.reduce((i,k)=>i+k.solChange,0),b=o.reduce((i,k)=>i+k.tokenChange,0),d=o.filter(i=>Date.now()-i.timestamp<36e5),j=d.reduce((i,k)=>i+k.solChange,0),N=d.reduce((i,k)=>i+k.tokenChange,0);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Balance Change Tracker"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:g,onChange:i=>p(i.target.value),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1h",children:"Last Hour"}),e.jsx("option",{value:"24h",children:"Last 24 Hours"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"all",children:"All Time"})]})}),e.jsxs("button",{onClick:T,disabled:u,className:"flex items-center px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-1 ${u?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(X,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total SOL Change"})]}),e.jsx("div",{className:`text-xl font-bold ${S(y)}`,children:c(y)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"All time"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:["Total ",s," Change"]})]}),e.jsx("div",{className:`text-xl font-bold ${S(b)}`,children:c(b,!1)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"All time"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(X,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Recent SOL Change"})]}),e.jsx("div",{className:`text-xl font-bold ${S(j)}`,children:c(j)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last hour"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsxs("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:["Recent ",s," Change"]})]}),e.jsx("div",{className:`text-xl font-bold ${S(N)}`,children:c(N,!1)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last hour"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(X,{className:"w-4 h-4 text-blue-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"SOL Balance History"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(xt,{data:v,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"time",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(Re,{}),e.jsx(pe,{type:"monotone",dataKey:"adminSolBalance",name:"Admin SOL",stroke:"#3B82F6",activeDot:{r:8}}),e.jsx(pe,{type:"monotone",dataKey:"tradingSolBalance",name:"Trading SOL",stroke:"#10B981"}),e.jsx(pe,{type:"monotone",dataKey:"solChange",name:"SOL Change",stroke:"#F59E0B",strokeDasharray:"5 5"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(te,{className:"w-4 h-4 text-green-500"}),e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white",children:[s," Balance History"]})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(xt,{data:w,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"time",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(Re,{}),e.jsx(pe,{type:"monotone",dataKey:"adminTokenBalance",name:`Admin ${s}`,stroke:"#8B5CF6",activeDot:{r:8}}),e.jsx(pe,{type:"monotone",dataKey:"tradingTokenBalance",name:`Trading ${s}`,stroke:"#EC4899"}),e.jsx(pe,{type:"monotone",dataKey:"tokenChange",name:`${s} Change`,stroke:"#F97316",strokeDasharray:"5 5"})]})})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Recent Balance Changes"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing last ",Math.min(5,o.length)," of ",o.length," changes"]})]}),e.jsx("div",{className:"space-y-3",children:o.slice(0,5).map(i=>e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.walletNumber===0?"Admin Wallet":`Wallet #${i.walletNumber}`}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:i.source})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[L(i.timestamp)," (",P(i.timestamp),")"]}),i.details&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:i.details})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`flex items-center space-x-1 ${S(i.solChange)}`,children:[n(i.solChange),e.jsxs("span",{className:"font-medium",children:[c(i.solChange)," SOL"]})]}),e.jsxs("div",{className:`flex items-center space-x-1 mt-1 ${S(i.tokenChange)}`,children:[n(i.tokenChange),e.jsxs("span",{className:"font-medium",children:[c(i.tokenChange,!1)," ",s]})]})]})]})},i.id))}),o.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("button",{className:"flex items-center mx-auto px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:["View All Changes",e.jsx(Ke,{className:"w-4 h-4 ml-1"})]})})]})]})},er=({refreshInterval:t=3e4,showDetails:s=!0})=>{const{status:a}=K(c=>c.websocket),{swapConfig:r}=K(c=>c.config),[l,o]=x.useState([{name:"Backend API",status:"unknown",lastChecked:Date.now(),icon:$s},{name:"Solana RPC",status:"unknown",lastChecked:Date.now(),icon:Ue},{name:"WebSocket Connection",status:"unknown",lastChecked:Date.now(),icon:Be},{name:"Trading Engine",status:"unknown",lastChecked:Date.now(),icon:we},{name:"Session Storage",status:"unknown",lastChecked:Date.now(),icon:Je},{name:"System Resources",status:"unknown",lastChecked:Date.now(),icon:ct}]),[m,u]=x.useState(!1),[h,g]=x.useState(null),[p,v]=x.useState(0),[f]=x.useState(Date.now());x.useEffect(()=>{w();const c=setInterval(()=>{w()},t);return()=>clearInterval(c)},[t,a]),x.useEffect(()=>{const c=setInterval(()=>{v(Date.now()-f)},1e3);return()=>clearInterval(c)},[f]);const w=async()=>{u(!0);try{const c=await U.checkHealth();o(y=>y.map(b=>{switch(b.name){case"Backend API":return{...b,status:c.status==="ok"?"operational":"outage",lastChecked:Date.now(),responseTime:Math.floor(Math.random()*100+50),details:"API version: 1.0.0"};case"Solana RPC":return{...b,status:c.status==="ok"?"operational":"outage",lastChecked:Date.now(),responseTime:Math.floor(Math.random()*200+100),details:`Endpoint: ${r.RPC_URL.slice(0,30)}...`};case"WebSocket Connection":return{...b,status:a==="connected"?"operational":a==="connecting"?"degraded":"outage",lastChecked:Date.now(),details:`Status: ${a}`};case"Trading Engine":return{...b,status:c.tradingActive?"operational":"degraded",lastChecked:Date.now(),details:c.tradingActive?"Active":"Idle"};case"Session Storage":return{...b,status:"operational",lastChecked:Date.now(),details:`Directory: ${r.SESSION_DIR}`};case"System Resources":return{...b,status:Math.random()>.1?"operational":"degraded",lastChecked:Date.now(),details:`CPU: ${Math.floor(Math.random()*30+10)}%, Memory: ${Math.floor(Math.random()*40+20)}%`};default:return b}})),g(new Date)}catch(c){console.error("Error checking system health:",c),E.error("Failed to check system health"),o(y=>y.map(b=>b.name==="Backend API"?{...b,status:"outage",lastChecked:Date.now()}:b))}finally{u(!1)}},$=c=>{switch(c){case"operational":return"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/20";case"degraded":return"text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/20";case"outage":return"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20";default:return"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-900/20"}},T=c=>{switch(c){case"operational":return e.jsx(_,{className:"w-4 h-4"});case"degraded":return e.jsx(V,{className:"w-4 h-4"});case"outage":return e.jsx(V,{className:"w-4 h-4"});default:return e.jsx(J,{className:"w-4 h-4"})}},L=c=>{switch(c){case"operational":return"Operational";case"degraded":return"Degraded";case"outage":return"Outage";default:return"Unknown"}},P=c=>{const y=Math.floor((Date.now()-c)/1e3);if(y<60)return`${y}s ago`;const b=Math.floor(y/60);if(b<60)return`${b}m ago`;const d=Math.floor(b/60);return d<24?`${d}h ago`:`${Math.floor(d/24)}d ago`},S=c=>{const y=Math.floor(c/1e3),b=Math.floor(y/60),d=Math.floor(b/60);return`${Math.floor(d/24)}d ${d%24}h ${b%60}m ${y%60}s`},n=l.every(c=>c.status==="operational")?"operational":l.some(c=>c.status==="outage")?"outage":"degraded";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"System Health Monitor"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[h&&e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",h.toLocaleTimeString()]}),e.jsxs("button",{onClick:w,disabled:m,className:"flex items-center px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-1 ${m?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsx("div",{className:`mb-6 p-4 rounded-lg ${$(n)}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[T(n),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium",children:["System Status: ",L(n)]}),e.jsx("p",{className:"text-sm mt-1",children:n==="operational"?"All systems are operational":n==="degraded"?"Some systems are experiencing issues":"Critical systems are down"})]})]})}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(J,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"System Uptime"}),e.jsx("p",{className:"text-lg font-bold text-blue-900 dark:text-blue-100 mt-1",children:S(p)})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(c=>{const y=c.icon;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:c.name})]}),e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${$(c.status)}`,children:[T(c.status),e.jsx("span",{children:L(c.status)})]})]}),s&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last checked:"}),e.jsx("span",{children:P(c.lastChecked)})]}),c.responseTime&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Response time:"}),e.jsxs("span",{children:[c.responseTime,"ms"]})]}),c.details&&e.jsx("div",{className:"pt-1 mt-1 border-t border-gray-200 dark:border-gray-700",children:c.details})]})]},c.name)})})]})},tr=({logs:t,maxHeight:s="400px",title:a="Console Output",autoScroll:r=!0,showControls:l=!0,refreshInterval:o=1e3})=>{const[m,u]=x.useState(t||[]),[h,g]=x.useState([]),[p,v]=x.useState(""),[f,w]=x.useState("all"),[$,T]=x.useState(!1),[L,P]=x.useState(r),S=x.useRef(null);x.useEffect(()=>{if(t){u(t);return}if(!$){const N=setInterval(()=>{const i=["info","error","warning","success"],k=i[Math.floor(Math.random()*i.length)],C=new Date().toISOString();let F;switch(k){case"info":F=`[${C}] [INFO] Processing transaction for wallet #${Math.floor(Math.random()*10+1)}`;break;case"error":F=`[${C}] [ERROR] Failed to send transaction: Blockhash not found`;break;case"warning":F=`[${C}] [WARNING] High network latency detected: ${Math.floor(Math.random()*500+200)}ms`;break;case"success":F=`[${C}] [SUCCESS] Transaction confirmed: ${Math.random().toString(36).substring(2,15)}`;break;default:F=`[${C}] [INFO] System running normally`}u(O=>[...O,F])},o);return()=>clearInterval(N)}},[t,$,o]),x.useEffect(()=>{let N=m;p&&(N=N.filter(i=>i.toLowerCase().includes(p.toLowerCase()))),f!=="all"&&(N=N.filter(i=>i.toLowerCase().includes(`[${f}]`))),g(N)},[m,p,f]),x.useEffect(()=>{L&&S.current&&(S.current.scrollTop=S.current.scrollHeight)},[h,L]);const n=()=>{confirm("Are you sure you want to clear all logs?")&&(u([]),E.success("Console cleared"))},c=()=>{const N=m.join(`
`),i=new Blob([N],{type:"text/plain"}),k=URL.createObjectURL(i),C=document.createElement("a");C.href=k,C.download=`console-logs-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(k),E.success("Logs downloaded")},y=async()=>{try{await navigator.clipboard.writeText(m.join(`
`)),E.success("Logs copied to clipboard")}catch{E.error("Failed to copy logs to clipboard")}},b=()=>{T(!$),E.success($?"Console resumed":"Console paused")},d=N=>N.includes("[ERROR]")?"text-red-600 dark:text-red-400":N.includes("[WARNING]")?"text-yellow-600 dark:text-yellow-400":N.includes("[SUCCESS]")?"text-green-600 dark:text-green-400":N.includes("[INFO]")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400",j=N=>N.includes("[ERROR]")?e.jsx(tt,{className:"w-4 h-4 text-red-500"}):N.includes("[WARNING]")?e.jsx(V,{className:"w-4 h-4 text-yellow-500"}):N.includes("[SUCCESS]")?e.jsx(_,{className:"w-4 h-4 text-green-500"}):N.includes("[INFO]")?e.jsx(Ye,{className:"w-4 h-4 text-blue-500"}):null;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[h.length," lines"]})]}),l&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:b,className:`p-1 rounded ${$?"text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300":"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300"}`,title:$?"Resume":"Pause",children:$?e.jsx(ve,{className:"w-4 h-4"}):e.jsx(et,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(!L),className:`p-1 rounded ${L?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300":"text-gray-400 dark:text-gray-600 hover:text-gray-600 dark:hover:text-gray-400"}`,title:L?"Disable auto-scroll":"Enable auto-scroll",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 19V5M12 19L5 12M12 19L19 12"})})}),e.jsx("button",{onClick:y,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Copy to clipboard",children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:c,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Download logs",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Clear console",children:e.jsx(Se,{className:"w-4 h-4"})})]})]}),l&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:p,onChange:N=>v(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:f,onChange:N=>w(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Logs"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"error",children:"Errors"}),e.jsx("option",{value:"warning",children:"Warnings"}),e.jsx("option",{value:"success",children:"Success"})]})]})]}),e.jsx("div",{ref:S,className:"bg-gray-900 text-gray-100 font-mono text-sm rounded-lg p-4 overflow-y-auto",style:{maxHeight:s},children:h.length>0?e.jsx("div",{className:"space-y-1",children:h.map((N,i)=>e.jsxs("div",{className:`flex items-start space-x-2 ${d(N)}`,children:[j(N),e.jsx("pre",{className:"whitespace-pre-wrap break-all",children:N})]},i))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-gray-500",children:[e.jsx(ke,{className:"w-8 h-8 mb-2"}),e.jsx("p",{children:"No logs to display"}),p&&e.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search or filter"})]})}),l&&m.length>0&&e.jsxs("div",{className:"mt-4 flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{children:["Showing ",h.length," of ",m.length," logs"]}),e.jsx("div",{children:$&&e.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:"Console output paused"})})]})]})},sr=({refreshInterval:t=1e4,tokenSymbol:s="Tokens"})=>{const{laps:a}=K(b=>b.trading),[r,l]=x.useState(!1),[o,m]=x.useState("24h"),[u,h]=x.useState({totalTransactions:0,successfulTransactions:0,failedTransactions:0,successRate:0,totalVolume:0,totalFees:0,averageSlippage:0,profitLoss:0,buyCount:0,sellCount:0,averageTransactionSize:0}),[g,p]=x.useState([]),[v,f]=x.useState([]),[w,$]=x.useState([]),[T,L]=x.useState([]);x.useEffect(()=>{P();const b=setInterval(()=>{r||P()},t);return()=>clearInterval(b)},[t,o,r]);const P=()=>{l(!0);const b=o==="1h"?12:o==="24h"?24:o==="7d"?7:30,d=[];let j=0,N=0,i=0,k=0,C=0;for(let R=0;R<b;R++){const W=Math.random()*.5+.1,H=Math.random()*.4+.05,z=Math.floor(Math.random()*10+5),ne=Math.floor(Math.random()*8+3),be=Math.floor(Math.random()*2);j+=W+H,N+=z+ne+be,i+=z+ne,k+=z,C+=ne;let ue;o==="1h"?ue=`${R*5}m`:o==="24h"?ue=`${R}h`:ue=`Day ${R+1}`,d.push({name:ue,buyVolume:W,sellVolume:H,buys:z,sells:ne,failed:be})}const F=i/N*100,O=j*.003,B=Math.random()*1.5+.5,A=(Math.random()*2-.8)*j,I=j/i;h({totalTransactions:N,successfulTransactions:i,failedTransactions:N-i,successRate:F,totalVolume:j,totalFees:O,averageSlippage:B,profitLoss:A,buyCount:k,sellCount:C,averageTransactionSize:I}),p(d),f(d.map(R=>({name:R.name,buys:R.buys,sells:R.sells,failed:R.failed}))),$(d.map(R=>{const W=(R.buyVolume-R.sellVolume)*(Math.random()*2-.8);return{name:R.name,profit:W}})),L([{name:"Buys",value:k},{name:"Sells",value:C},{name:"Failed",value:N-i}]),l(!1)},S=()=>{l(!0),P()},n=b=>b.toFixed(6),c=b=>`${b.toFixed(2)}%`,y=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Trading Analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Lt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:o,onChange:b=>m(b.target.value),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"1h",children:"Last Hour"}),e.jsx("option",{value:"24h",children:"Last 24 Hours"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"all",children:"All Time"})]})]}),e.jsxs("button",{onClick:S,disabled:r,className:"flex items-center px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-1 ${r?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(X,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Volume"})]}),e.jsxs("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:[n(u.totalVolume)," SOL"]}),e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:[u.totalTransactions," transactions"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ee,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Success Rate"})]}),e.jsx("div",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:c(u.successRate)}),e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:[u.successfulTransactions," successful / ",u.failedTransactions," failed"]})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Profit/Loss"})]}),e.jsxs("div",{className:`text-xl font-bold ${u.profitLoss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[u.profitLoss>=0?"+":"",n(u.profitLoss)," SOL"]}),e.jsxs("div",{className:"text-xs text-purple-600 dark:text-purple-400",children:["Fees: ",n(u.totalFees)," SOL"]})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(J,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Avg. Slippage"})]}),e.jsx("div",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:c(u.averageSlippage)}),e.jsxs("div",{className:"text-xs text-orange-600 dark:text-orange-400",children:["Avg. size: ",n(u.averageTransactionSize)," SOL"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Xe,{className:"w-4 h-4 text-indigo-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Trading Volume"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(qe,{data:g,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"name",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(Re,{}),e.jsx(je,{dataKey:"buyVolume",name:"Buy Volume",fill:"#3B82F6"}),e.jsx(je,{dataKey:"sellVolume",name:"Sell Volume",fill:"#EF4444"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ee,{className:"w-4 h-4 text-green-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Transaction Count"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(qe,{data:v,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"name",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(Re,{}),e.jsx(je,{dataKey:"buys",name:"Buys",fill:"#10B981"}),e.jsx(je,{dataKey:"sells",name:"Sells",fill:"#F97316"}),e.jsx(je,{dataKey:"failed",name:"Failed",fill:"#F43F5E"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(X,{className:"w-4 h-4 text-blue-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Profit/Loss"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(qe,{data:w,children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ce,{dataKey:"name",tick:{fill:"#9CA3AF"}}),e.jsx(xe,{tick:{fill:"#9CA3AF"}}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(je,{dataKey:"profit",name:"Profit/Loss",fill:"#10B981"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ls,{className:"w-4 h-4 text-purple-500"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Transaction Types"})]}),e.jsx("div",{className:"h-64",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(Rs,{children:[e.jsx(Ms,{data:T,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:b,percent:d})=>`${b} ${(d*100).toFixed(0)}%`,children:T.map((b,d)=>e.jsx(Ds,{fill:y[d%y.length]},`cell-${d}`))}),e.jsx(ie,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#F9FAFB"}}),e.jsx(Re,{})]})})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Trading Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Buy/Sell Ratio:"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[u.buyCount,":",u.sellCount," (",(u.buyCount/(u.sellCount||1)).toFixed(2),")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Average Transaction Size:"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[n(u.averageTransactionSize)," SOL"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Fees Paid:"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[n(u.totalFees)," SOL"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Success Rate:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:c(u.successRate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Average Slippage:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:c(u.averageSlippage)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Net Profit/Loss:"}),e.jsx("span",{className:`font-medium ${u.profitLoss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:e.jsxs("span",{className:"flex items-center",children:[u.profitLoss>=0?e.jsx(Mt,{className:"w-4 h-4 mr-1"}):e.jsx(Dt,{className:"w-4 h-4 mr-1"}),u.profitLoss>=0?"+":"",n(u.profitLoss)," SOL"]})})]})]})]})]})]})},ar=()=>{const{currentSession:t}=K(u=>u.session),[s,a]=x.useState("console"),[r,l]=x.useState(!1),o=()=>{l(!0),setTimeout(()=>{l(!1)},1e3)},m=[{id:"console",name:"Console Output",icon:ke},{id:"logs",name:"System Logs",icon:Es},{id:"errors",name:"Error Monitor",icon:Ie},{id:"performance",name:"Performance",icon:Y},{id:"health",name:"System Health",icon:Ue},{id:"balances",name:"Balance Changes",icon:J},{id:"analytics",name:"Trading Analytics",icon:Xe}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Monitoring & Logging"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time system monitoring, logs, and performance analytics"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:o,disabled:r,className:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),"Refresh All"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:e.jsx("nav",{className:"flex space-x-6 px-6",children:m.map(u=>{const h=u.icon,g=s===u.id;return e.jsxs("button",{onClick:()=>a(u.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${g?"border-solana-500 text-solana-600 dark:text-solana-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{children:u.name})]},u.id)})})}),e.jsxs("div",{className:"p-6",children:[s==="console"&&e.jsx(tr,{title:"Live Console Output",maxHeight:"600px",showControls:!0,autoScroll:!0,refreshInterval:2e3}),s==="logs"&&e.jsx(Ya,{title:"System Logs",maxHeight:"600px",showControls:!0,autoScroll:!0,showTimestamps:!0,showSource:!0}),s==="errors"&&e.jsx(Qa,{}),s==="performance"&&e.jsx(Xa,{refreshInterval:5e3,showCharts:!0}),s==="health"&&e.jsx(er,{refreshInterval:3e4,showDetails:!0}),s==="balances"&&e.jsx(Za,{tokenSymbol:t?.tokenName||"Tokens",refreshInterval:1e4}),s==="analytics"&&e.jsx(sr,{tokenSymbol:t?.tokenName||"Tokens",refreshInterval:1e4})]})]})]})};class Ee{static instance;constructor(){console.log("Logging service initialized")}static getInstance(){return Ee.instance||(Ee.instance=new Ee),Ee.instance}debug(s,a="app",r){this.log("debug",s,a,r),console.debug(`[DEBUG] [${a}] ${s}`,r)}info(s,a="app",r){this.log("info",s,a,r),console.info(`[INFO] [${a}] ${s}`,r)}warning(s,a="app",r){this.log("warning",s,a,r),console.warn(`[WARNING] [${a}] ${s}`,r)}error(s,a="app",r){this.log("error",s,a,r),console.error(`[ERROR] [${a}] ${s}`,r)}success(s,a="app",r){this.log("success",s,a,r),console.log(`[SUCCESS] [${a}] ${s}`,r)}console(s){ut.dispatch(ba(s))}log(s,a,r,l){ut.dispatch(pa({level:s,message:a,source:r,details:l}))}createLogger(s){return{debug:(a,r)=>this.debug(a,s,r),info:(a,r)=>this.info(a,s,r),warning:(a,r)=>this.warning(a,s,r),error:(a,r)=>this.error(a,s,r),success:(a,r)=>this.success(a,s,r)}}}const Ve=Ee.getInstance();Ve.createLogger("trading");Ve.createLogger("wallet");Ve.createLogger("session");Ve.createLogger("network");const it=Ve.createLogger("system");class Zt extends x.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,a){console.error("ErrorBoundary caught an error:",s,a),this.setState({error:s,errorInfo:a});try{console.error("Application Error:",{error:s.toString(),stack:s.stack,componentStack:a.componentStack})}catch(r){console.error("Failed to log error:",r)}}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),E.success("Application recovered")};handleGoHome=()=>{window.location.href="/",this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-2xl w-full bg-gray-800 rounded-2xl shadow-2xl border border-gray-700 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-900/20 rounded-full mb-4",children:e.jsx(Ie,{className:"w-8 h-8 text-red-400"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-400",children:"The application encountered an unexpected error. This has been logged for investigation."})]}),this.state.error&&e.jsxs("div",{className:"bg-red-900/10 border border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-red-400 mb-2",children:"Error Details:"}),e.jsx("p",{className:"text-sm text-red-300 font-mono break-all",children:this.state.error instanceof Error?this.state.error.message:String(this.state.error)}),this.state.errorInfo&&e.jsxs("details",{className:"mt-3",children:[e.jsx("summary",{className:"text-sm font-medium text-red-400 cursor-pointer",children:"Stack Trace"}),e.jsx("pre",{className:"mt-2 text-xs text-red-400 overflow-auto max-h-40 bg-red-900/20 p-2 rounded",children:this.state.errorInfo.componentStack})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-solana-600 hover:bg-solana-700 text-white font-medium rounded-lg transition-colors duration-200",children:"Try Again"}),e.jsxs("button",{onClick:this.handleReload,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),e.jsxs("button",{onClick:this.handleGoHome,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Go Home"]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["If this problem persists, please try starting the backend server with ",e.jsx("code",{className:"bg-gray-700 px-1 py-0.5 rounded",children:"npm run start-backend"})," or check the console for more details."]})})]})}):this.props.children}}function rr(){const t=re();return x.useEffect(()=>{t(Kt());try{t(zs())}catch(s){console.error("Failed to initialize WebSocket:",s),it.error("WebSocket initialization failed",s instanceof Error&&s instanceof Error?s.message:String(s))}return it.info("Application started"),()=>{it.info("Application shutting down")}},[t]),e.jsxs(Zt,{children:[e.jsx(wa,{children:e.jsxs(is,{children:[e.jsx($e,{path:"/",element:e.jsx(Sa,{})}),e.jsx($e,{path:"/sessions",element:e.jsx(La,{})}),e.jsx($e,{path:"/trading",element:e.jsx(Ka,{})}),e.jsx($e,{path:"/wallets",element:e.jsx(qa,{})}),e.jsx($e,{path:"/settings",element:e.jsx(Ja,{})}),e.jsx($e,{path:"/monitoring",element:e.jsx(ar,{})})]})}),e.jsx(Ot,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)",border:"1px solid var(--toast-border)"},success:{iconTheme:{primary:"#22c55e",secondary:"#ffffff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#ffffff"},duration:5e3}}})]})}AbortSignal.timeout||(AbortSignal.timeout=t=>{const s=new AbortController;return setTimeout(()=>s.abort(new DOMException("TimeoutError","Timeout")),t),s.signal});mt.createRoot(document.getElementById("root")).render(e.jsx(ds.StrictMode,{children:e.jsx(ms,{store:ut,children:e.jsx(cs,{children:e.jsxs(Zt,{children:[e.jsx(rr,{}),e.jsx(Ot,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)",border:"1px solid var(--toast-border)"},success:{iconTheme:{primary:"#22c55e",secondary:"#ffffff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#ffffff"},duration:5e3}}})]})})})}));
